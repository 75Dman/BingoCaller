{"ast":null,"code":"// If a bundled audio file is present, prefer it for the win chime; otherwise fallback to WebAudio synthesis.\nimport winSoundUrl from './Bingo Tusch.mp3';\n\n// internal synthesized chime (fallback)\nfunction playWinChime() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    if (!AudioCtx) return;\n    const ctx = new AudioCtx();\n    const now = ctx.currentTime;\n    const master = ctx.createGain();\n    master.gain.setValueAtTime(0.0001, now);\n    master.connect(ctx.destination);\n\n    // quick arpeggio of three notes\n    const freqs = [880, 1320, 1760];\n    freqs.forEach((f, i) => {\n      const o = ctx.createOscillator();\n      o.type = 'sine';\n      o.frequency.setValueAtTime(f, now + i * 0.06);\n      const g = ctx.createGain();\n      g.gain.setValueAtTime(0, now + i * 0.06);\n      g.gain.linearRampToValueAtTime(0.12, now + i * 0.06 + 0.01);\n      g.gain.exponentialRampToValueAtTime(0.0001, now + i * 0.06 + 0.35);\n      o.connect(g);\n      g.connect(master);\n      o.start(now + i * 0.06);\n      o.stop(now + i * 0.06 + 0.4);\n    });\n    master.gain.exponentialRampToValueAtTime(0.9, now + 0.001);\n    master.gain.exponentialRampToValueAtTime(0.0001, now + 1.2);\n    setTimeout(() => {\n      try {\n        ctx.close();\n      } catch (e) {}\n    }, 1600);\n  } catch (err) {\n    console.debug('playWinChime failed', err);\n  }\n}\nexport function playWinSound() {\n  try {\n    if (typeof Audio !== 'undefined' && winSoundUrl) {\n      const a = new Audio(winSoundUrl);\n      a.volume = 0.95;\n      a.play().catch(() => {\n        // fallback to chime\n        playWinChime();\n      });\n      return;\n    }\n  } catch (err) {\n    console.debug('playWinSound (file) failed', err);\n  }\n  // fallback\n  playWinChime();\n}\n\n// Rolling/noise sound for ball-draw effect. Returns a stop function.\nexport function startRollingSound() {\n  try {\n    const AudioCtx = window.AudioContext || window.webkitAudioContext;\n    if (!AudioCtx) return () => {};\n    const ctx = new AudioCtx();\n    const now = ctx.currentTime;\n\n    // noise buffer\n    const bufferSize = Math.max(1, Math.floor(ctx.sampleRate * 1));\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);\n    const data = buffer.getChannelData(0);\n    for (let i = 0; i < bufferSize; i++) data[i] = (Math.random() * 2 - 1) * 0.25;\n    const src = ctx.createBufferSource();\n    src.buffer = buffer;\n    src.loop = true;\n    const lp = ctx.createBiquadFilter();\n    lp.type = 'lowpass';\n    lp.frequency.setValueAtTime(800 + Math.random() * 1200, now);\n    const hp = ctx.createBiquadFilter();\n    hp.type = 'highpass';\n    hp.frequency.setValueAtTime(200 + Math.random() * 200, now);\n    const gain = ctx.createGain();\n    gain.gain.setValueAtTime(0.0001, now);\n    src.connect(lp);\n    lp.connect(hp);\n    hp.connect(gain);\n    gain.connect(ctx.destination);\n    src.start();\n\n    // fade in\n    gain.gain.linearRampToValueAtTime(0.5, now + 0.05);\n\n    // modulate filter and gain rapidly to simulate rolling\n    const iv = setInterval(() => {\n      lp.frequency.linearRampToValueAtTime(400 + Math.random() * 1600, ctx.currentTime + 0.05);\n      hp.frequency.linearRampToValueAtTime(200 + Math.random() * 400, ctx.currentTime + 0.05);\n      gain.gain.linearRampToValueAtTime(0.2 + Math.random() * 0.45, ctx.currentTime + 0.05);\n    }, 120);\n    const stop = (fade = 0.12) => {\n      clearInterval(iv);\n      gain.gain.linearRampToValueAtTime(0.0001, ctx.currentTime + fade);\n      setTimeout(() => {\n        try {\n          src.stop();\n          ctx.close();\n        } catch (e) {}\n      }, (fade + 0.05) * 1000);\n    };\n    return stop;\n  } catch (err) {\n    console.debug('startRollingSound failed', err);\n    return () => {};\n  }\n}\nexport default {\n  playWinSound,\n  startRollingSound\n};","map":{"version":3,"names":["winSoundUrl","playWinChime","AudioCtx","window","AudioContext","webkitAudioContext","ctx","now","currentTime","master","createGain","gain","setValueAtTime","connect","destination","freqs","forEach","f","i","o","createOscillator","type","frequency","g","linearRampToValueAtTime","exponentialRampToValueAtTime","start","stop","setTimeout","close","e","err","console","debug","playWinSound","Audio","a","volume","play","catch","startRollingSound","bufferSize","Math","max","floor","sampleRate","buffer","createBuffer","data","getChannelData","random","src","createBufferSource","loop","lp","createBiquadFilter","hp","iv","setInterval","fade","clearInterval"],"sources":["C:/Users/Rande/bingocaller/src/utils/sound.js"],"sourcesContent":["// If a bundled audio file is present, prefer it for the win chime; otherwise fallback to WebAudio synthesis.\r\nimport winSoundUrl from './Bingo Tusch.mp3'\r\n\r\n// internal synthesized chime (fallback)\r\nfunction playWinChime(){\r\n  try {\r\n    const AudioCtx = window.AudioContext || window.webkitAudioContext\r\n    if (!AudioCtx) return\r\n    const ctx = new AudioCtx()\r\n    const now = ctx.currentTime\r\n    const master = ctx.createGain(); master.gain.setValueAtTime(0.0001, now); master.connect(ctx.destination)\r\n\r\n    // quick arpeggio of three notes\r\n    const freqs = [880, 1320, 1760]\r\n    freqs.forEach((f, i) => {\r\n      const o = ctx.createOscillator(); o.type = 'sine'; o.frequency.setValueAtTime(f, now + i * 0.06)\r\n      const g = ctx.createGain(); g.gain.setValueAtTime(0, now + i * 0.06)\r\n      g.gain.linearRampToValueAtTime(0.12, now + i * 0.06 + 0.01)\r\n      g.gain.exponentialRampToValueAtTime(0.0001, now + i * 0.06 + 0.35)\r\n      o.connect(g); g.connect(master); o.start(now + i * 0.06); o.stop(now + i * 0.06 + 0.4)\r\n    })\r\n\r\n    master.gain.exponentialRampToValueAtTime(0.9, now + 0.001)\r\n    master.gain.exponentialRampToValueAtTime(0.0001, now + 1.2)\r\n    setTimeout(()=>{ try{ ctx.close() }catch(e){} }, 1600)\r\n  } catch (err) {\r\n    console.debug('playWinChime failed', err)\r\n  }\r\n}\r\n\r\nexport function playWinSound(){\r\n  try {\r\n    if (typeof Audio !== 'undefined' && winSoundUrl) {\r\n      const a = new Audio(winSoundUrl)\r\n      a.volume = 0.95\r\n      a.play().catch(()=>{\r\n        // fallback to chime\r\n        playWinChime()\r\n      })\r\n      return\r\n    }\r\n  } catch (err) {\r\n    console.debug('playWinSound (file) failed', err)\r\n  }\r\n  // fallback\r\n  playWinChime()\r\n}\r\n\r\n// Rolling/noise sound for ball-draw effect. Returns a stop function.\r\nexport function startRollingSound(){\r\n  try {\r\n    const AudioCtx = window.AudioContext || window.webkitAudioContext\r\n    if (!AudioCtx) return () => {}\r\n    const ctx = new AudioCtx()\r\n    const now = ctx.currentTime\r\n\r\n    // noise buffer\r\n    const bufferSize = Math.max(1, Math.floor(ctx.sampleRate * 1))\r\n    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate)\r\n    const data = buffer.getChannelData(0)\r\n    for (let i=0;i<bufferSize;i++) data[i] = (Math.random()*2-1) * 0.25\r\n\r\n    const src = ctx.createBufferSource(); src.buffer = buffer; src.loop = true\r\n    const lp = ctx.createBiquadFilter(); lp.type = 'lowpass'; lp.frequency.setValueAtTime(800 + Math.random()*1200, now)\r\n    const hp = ctx.createBiquadFilter(); hp.type = 'highpass'; hp.frequency.setValueAtTime(200 + Math.random()*200, now)\r\n    const gain = ctx.createGain(); gain.gain.setValueAtTime(0.0001, now)\r\n\r\n    src.connect(lp); lp.connect(hp); hp.connect(gain); gain.connect(ctx.destination)\r\n    src.start()\r\n\r\n    // fade in\r\n    gain.gain.linearRampToValueAtTime(0.5, now + 0.05)\r\n\r\n    // modulate filter and gain rapidly to simulate rolling\r\n    const iv = setInterval(()=>{\r\n      lp.frequency.linearRampToValueAtTime(400 + Math.random()*1600, ctx.currentTime + 0.05)\r\n      hp.frequency.linearRampToValueAtTime(200 + Math.random()*400, ctx.currentTime + 0.05)\r\n      gain.gain.linearRampToValueAtTime(0.2 + Math.random()*0.45, ctx.currentTime + 0.05)\r\n    }, 120)\r\n\r\n    const stop = (fade = 0.12) => {\r\n      clearInterval(iv)\r\n      gain.gain.linearRampToValueAtTime(0.0001, ctx.currentTime + fade)\r\n      setTimeout(()=>{ try{ src.stop(); ctx.close() }catch(e){} }, (fade+0.05)*1000)\r\n    }\r\n    return stop\r\n  } catch (err) {\r\n    console.debug('startRollingSound failed', err)\r\n    return () => {}\r\n  }\r\n}\r\n\r\nexport default { playWinSound, startRollingSound }\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}