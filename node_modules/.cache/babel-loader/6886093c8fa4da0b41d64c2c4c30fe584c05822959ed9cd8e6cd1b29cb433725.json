{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rande\\\\bingocaller\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/*\n  src/App.js\n  Main application container. Coordinates OCR upload, card state,\n  ball picker, dab logic, auto/manual modes, and win detection.\n*/\nimport React, { useEffect, useState, useCallback } from 'react';\nimport ImageUploader from './components/ImageUploader';\nimport CardView from './components/CardView';\nimport BallPicker from './components/BallPicker';\nimport PlayerList from './components/PlayerList';\nimport DabOverlayControls from './components/DabOverlayControls';\nimport GridDesigner from './components/GridDesigner';\nimport WinModal from './components/WinModal';\nimport BingoCardView from './components/BingoCardView';\nimport BingoBallView from './components/BingoBallView';\nimport ConfirmModal from './components/ConfirmModal';\nimport ListenerDebug from './components/ListenerDebug';\nimport { useLocalStorage } from './hooks/useLocalStorage';\nimport { fireConfetti } from './utils/confetti';\n\n// Keys for localStorage\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LS_KEYS = {\n  CARD: 'bingo_card',\n  PLAYERS: 'bingo_players',\n  DABBED: 'bingo_dabbed',\n  CALLED: 'bingo_called',\n  SETTINGS: 'bingo_settings'\n};\nfunction defaultEmptyCard(rows = 5, cols = 5) {\n  // generate an empty card of placeholders (null means empty cell)\n  return Array.from({\n    length: rows\n  }, () => Array.from({\n    length: cols\n  }, () => null));\n}\nexport default function App() {\n  _s();\n  // Persisted state via custom hook\n  const [card, setCard] = useLocalStorage(LS_KEYS.CARD, defaultEmptyCard());\n  // separate persisted lists for row/column players (to support player-only overlays)\n  const [playersRows, setPlayersRows] = useLocalStorage('bingo_players_rows', []);\n  const [playersCols, setPlayersCols] = useLocalStorage('bingo_players_cols', []);\n  // defaults to control whether row/col player labels are shown by default\n  const [gridDefaults, setGridDefaults] = useLocalStorage('bingo_grid_defaults', {\n    rows: 20,\n    cols: 5,\n    order: 'column',\n    scrambled: false,\n    firstNum: 1,\n    overlayType: 'dab',\n    playerCount: 20,\n    playerRowOffset: 110,\n    playerColOffset: 36,\n    showPlayerRows: true,\n    showPlayerCols: false\n  });\n  const [dabbed, setDabbed] = useLocalStorage(LS_KEYS.DABBED, null);\n  const [called, setCalled] = useLocalStorage(LS_KEYS.CALLED, []);\n  const [settings, setSettings] = useLocalStorage(LS_KEYS.SETTINGS, {\n    maxBall: 75,\n    autoMode: true,\n    soundEnabled: true\n  });\n  // persisted image reference: either a data URL, http URL, or an \"indexeddb:<key>\" marker\n  const [imageRef, setImageRef] = useLocalStorage('bingo_image_url', null);\n  // derived display URL (not persisted) used for rendering the <img src>\n  const [displayImageUrl, setDisplayImageUrl] = useState(null);\n  useEffect(() => {\n    // Guard against stale blob: URLs persisted to localStorage from previous sessions.\n    if (imageRef && typeof imageRef === 'string' && imageRef.startsWith('blob:')) {\n      console.debug('[App] Clearing stale blob URL from persisted imageRef');\n      setImageRef(null);\n    }\n  }, [imageRef, setImageRef]);\n\n  // If we get an indexeddb: marker, load it from IndexedDB and convert to data URL for display\n  useEffect(() => {\n    let cancelled = false;\n    async function resolveImage() {\n      if (!imageRef) {\n        setDisplayImageUrl(null);\n        return;\n      }\n      if (typeof imageRef === 'string' && imageRef.startsWith('indexeddb:')) {\n        const key = imageRef.slice('indexeddb:'.length);\n        try {\n          const {\n            getFile\n          } = await import('./utils/idb');\n          const file = await getFile(key);\n          if (!file) {\n            console.warn('[App] indexedDB entry not found for', key);\n            if (!cancelled) setImageRef(null);\n            return;\n          }\n          // convert file to dataURL\n          const dataURL = await new Promise((resolve, reject) => {\n            const fr = new FileReader();\n            fr.onload = () => resolve(fr.result);\n            fr.onerror = reject;\n            fr.readAsDataURL(file);\n          });\n          if (!cancelled) setDisplayImageUrl(dataURL);\n        } catch (err) {\n          console.error('Error loading image from indexedDB', err);\n          if (!cancelled) setImageRef(null);\n        }\n      } else {\n        // regular URL or data URL\n        setDisplayImageUrl(imageRef);\n      }\n    }\n    resolveImage();\n    return () => {\n      cancelled = true;\n    };\n  }, [imageRef, setImageRef]);\n  const [currentBall, setCurrentBall] = useState(null);\n  const [winner, setWinner] = useState(null);\n  // game mode and active full-screen view\n  const [gameMode, setGameMode] = useState('idle'); // 'idle' | 'running'\n  const [activeView, setActiveView] = useState('card'); // 'card' | 'ball'\n  // pending start-time warning when overlay count doesn't match maxBall\n  const [pendingStartWarning, setPendingStartWarning] = useState(null);\n\n  // dab overlay grid state\n  const [gridDesignerOpen, setGridDesignerOpen] = useState(false);\n  const [grid, setGrid] = useLocalStorage('bingo_grid', null);\n  // defaults for designer (persisted)\n  // (gridDefaults declared earlier with player show flags)\n\n  // ensure dabbed matrix shape matches card\n  useEffect(() => {\n    var _card$;\n    if (!card) return;\n    const rows = card.length;\n    const cols = ((_card$ = card[0]) === null || _card$ === void 0 ? void 0 : _card$.length) || 0;\n\n    // If the current grid does not include dab, explicitly clear any persisted dab state\n    if (!((grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'dab' || (grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'both')) {\n      if (dabbed !== null) {\n        console.debug('[App] Clearing persisted dab state because overlay is not dab/both');\n        setDabbed(null);\n      }\n      return;\n    }\n\n    // Otherwise ensure dabbed matrix shape matches card\n    if (!dabbed || dabbed.length !== rows || dabbed[0].length !== cols) {\n      const newDab = Array.from({\n        length: rows\n      }, () => Array.from({\n        length: cols\n      }, () => false));\n      setDabbed(newDab);\n    }\n  }, [card, grid]);\n\n  // Called when OCR or manual edit produces a new card matrix.\n  const setCardFromOCR = ({\n    rows,\n    imageUrl: imgUrl\n  }) => {\n    // If rows were extracted from text, prefer them (simple case)\n    if (rows && rows.length > 0) {\n      setCard(rows);\n      setImageRef(imgUrl);\n      // reset dabbed when new card loaded ONLY when current grid overlay includes dab\n      if ((grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'dab' || (grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'both') {\n        const newDab = Array.from({\n          length: rows.length\n        }, () => Array.from({\n          length: rows[0].length\n        }, () => false));\n        setDabbed(newDab);\n      } else {\n        setDabbed(null);\n      }\n      // do NOT automatically change players or detect rows anymore\n      setCalled([]);\n      setCurrentBall(null);\n      setWinner(null);\n      return;\n    }\n\n    // Fallback: no structured rows, just set empty or text-derived\n    const fallback = rows || defaultEmptyCard();\n    setCard(fallback);\n    setImageRef(imgUrl);\n    if ((grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'dab' || (grid === null || grid === void 0 ? void 0 : grid.overlayType) === 'both') {\n      const newDab2 = Array.from({\n        length: fallback.length\n      }, () => Array.from({\n        length: fallback[0].length\n      }, () => false));\n      setDabbed(newDab2);\n    } else {\n      setDabbed(null);\n    }\n    setCalled([]);\n    setCurrentBall(null);\n    setWinner(null);\n    return;\n  };\n\n  // Grid designer actions\n  const openGridDesigner = () => setGridDesignerOpen(true);\n  const closeGridDesigner = () => setGridDesignerOpen(false);\n  const clearGrid = () => {\n    setGrid(null);\n  };\n  const saveGrid = g => {\n    // g: { bbox, rows, cols, numbering, values, overlayType }\n    setGrid(g);\n    // populate card matrix from values\n    if (g && g.values) {\n      setCard(g.values);\n      // initialize dabbed only when overlayType includes dab\n      if (g.overlayType === 'dab' || g.overlayType === 'both') {\n        setDabbed(Array.from({\n          length: g.rows\n        }, () => Array.from({\n          length: g.cols\n        }, () => false)));\n      } else {\n        // explicitly clear any existing dabbed state when saving a player-only overlay\n        setDabbed(null);\n      }\n      // update global player lists based on what the designer saved (if present)\n      if (g.playerOverlay) {\n        if (g.playerOverlay.showRows) setPlayersRows(g.playerOverlay.rows.slice(0, g.rows));\n        if (g.playerOverlay.showCols) setPlayersCols(g.playerOverlay.cols.slice(0, g.cols));\n      }\n    }\n    // If overlay doesn't include dab, also ensure any previous winner state is cleared\n    if (!(g.overlayType === 'dab' || g.overlayType === 'both')) {\n      setWinner(null);\n      setCalled([]);\n      setCurrentBall(null);\n    }\n    setGridDesignerOpen(false);\n  };\n\n  // toggle dab for a specific cell (manual)\n  const toggleDab = (r, c) => {\n    // if dab overlay is not active/initialized, ignore manual toggles\n    if (!dabbed) return;\n    setDabbed(prev => {\n      const copy = prev.map(row => row.slice());\n      copy[r][c] = !copy[r][c];\n      return copy;\n    });\n  };\n\n  // When a number is called, mark any matching numbers on the card as dabbed (auto)\n  const handleNumberCalled = useCallback((num, {\n    auto\n  } = {\n    auto: false\n  }) => {\n    setCalled(prev => {\n      const next = [...prev, num];\n      return next;\n    });\n    setCurrentBall(num);\n    if (auto && dabbed) {\n      setDabbed(prev => {\n        const copy = prev.map(row => row.slice());\n        for (let r = 0; r < card.length; r++) {\n          for (let c = 0; c < (card[r] || []).length; c++) {\n            if (String(card[r][c]) === String(num)) copy[r][c] = true;\n          }\n        }\n        return copy;\n      });\n    }\n  }, [card, dabbed]);\n\n  // On any dab change, check for full-row wins\n  useEffect(() => {\n    var _dabbed$;\n    if (!dabbed) return;\n    // check rows\n    for (let r = 0; r < dabbed.length; r++) {\n      const row = dabbed[r];\n      const all = row.every(Boolean);\n      if (all) {\n        var _grid$playerOverlay, _grid$playerOverlay$r;\n        const player = grid === null || grid === void 0 ? void 0 : (_grid$playerOverlay = grid.playerOverlay) === null || _grid$playerOverlay === void 0 ? void 0 : (_grid$playerOverlay$r = _grid$playerOverlay.rows) === null || _grid$playerOverlay$r === void 0 ? void 0 : _grid$playerOverlay$r[r];\n        setWinner({\n          axis: 'row',\n          index: r,\n          player\n        });\n        fireConfetti();\n        return;\n      }\n    }\n    // check columns\n    const cols = ((_dabbed$ = dabbed[0]) === null || _dabbed$ === void 0 ? void 0 : _dabbed$.length) || 0;\n    for (let c = 0; c < cols; c++) {\n      let all = true;\n      for (let r = 0; r < dabbed.length; r++) {\n        if (!dabbed[r][c]) {\n          all = false;\n          break;\n        }\n      }\n      if (all) {\n        var _grid$playerOverlay2, _grid$playerOverlay2$;\n        const player = grid === null || grid === void 0 ? void 0 : (_grid$playerOverlay2 = grid.playerOverlay) === null || _grid$playerOverlay2 === void 0 ? void 0 : (_grid$playerOverlay2$ = _grid$playerOverlay2.cols) === null || _grid$playerOverlay2$ === void 0 ? void 0 : _grid$playerOverlay2$[c];\n        setWinner({\n          axis: 'col',\n          index: c,\n          player\n        });\n        fireConfetti();\n        return;\n      }\n    }\n  }, [dabbed, grid]);\n  const resetGame = () => {\n    setCalled([]);\n    setCurrentBall(null);\n    if (dabbed) setDabbed(prev => prev.map(row => row.map(() => false)));\n    setWinner(null);\n  };\n\n  // Initiate game mode with optional validation that the saved grid count matches the configured maxBall\n  const startGame = () => {\n    // compute number of distinct numbered cells in the saved grid (if any)\n    let overlayCount = 0;\n    if (grid && grid.values) {\n      const nums = new Set();\n      for (let r = 0; r < grid.values.length; r++) {\n        const row = grid.values[r] || [];\n        for (let c = 0; c < row.length; c++) {\n          const v = row[c];\n          if (v !== null && v !== undefined && v !== '') nums.add(String(v));\n        }\n      }\n      overlayCount = nums.size;\n    } else if (grid && grid.rows && grid.cols) {\n      overlayCount = Number(grid.rows) * Number(grid.cols);\n    }\n    if (overlayCount && overlayCount !== settings.maxBall) {\n      // show our themed modal instead of native confirm\n      setPendingStartWarning({\n        overlayCount,\n        maxBall: settings.maxBall\n      });\n      return;\n    }\n    resetGame();\n    setGameMode('running');\n    setActiveView('card');\n  };\n  const continueStart = () => {\n    setPendingStartWarning(null);\n    resetGame();\n    setGameMode('running');\n    setActiveView('card');\n  };\n  const cancelStart = () => {\n    setPendingStartWarning(null);\n  };\n  const toggleDabLine = (axis, idx) => {\n    // ignore if dab overlay not present\n    if (!dabbed) return;\n    setDabbed(prev => {\n      const copy = prev.map(r => r.slice());\n      if (axis === 'row') {\n        const all = copy[idx].every(Boolean);\n        for (let c = 0; c < copy[idx].length; c++) copy[idx][c] = !all;\n      } else {\n        // col\n        const rows = copy.length;\n        let all = true;\n        for (let r = 0; r < rows; r++) if (!copy[r][idx]) {\n          all = false;\n          break;\n        }\n        for (let r = 0; r < rows; r++) copy[r][idx] = !all;\n      }\n      return copy;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-root\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"topbar\",\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          margin: 0,\n          display: 'flex',\n          alignItems: 'center',\n          gap: 8,\n          fontSize: 18\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"1em\",\n          height: \"1em\",\n          viewBox: \"0 0 64 64\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          \"aria-hidden\": \"true\",\n          style: {\n            flex: '0 0 1em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n            cx: \"32\",\n            cy: \"32\",\n            r: \"30\",\n            fill: \"#fde68a\",\n            stroke: \"#c47c00\",\n            strokeWidth: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n            cx: \"26\",\n            cy: \"22\",\n            r: \"6\",\n            fill: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"text\", {\n            x: \"32\",\n            y: \"38\",\n            textAnchor: \"middle\",\n            fontSize: \"18\",\n            fontWeight: \"700\",\n            fill: \"#9b3412\",\n            children: \"B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), \"Bingo Caller Pro\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 12,\n              color: '#cbd5e1'\n            },\n            children: \"Auto:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSettings(s => ({\n              ...s,\n              autoMode: !s.autoMode\n            })),\n            style: {\n              padding: '6px 10px',\n              background: settings.autoMode ? '#0b3d91' : 'transparent',\n              color: '#fff',\n              border: '1px solid rgba(255,255,255,0.06)',\n              borderRadius: 6\n            },\n            children: settings.autoMode ? 'On' : 'Off'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `sound-toggle ${settings.soundEnabled ? '' : 'muted'}`,\n          onClick: () => setSettings(s => ({\n            ...s,\n            soundEnabled: !s.soundEnabled\n          })),\n          title: settings.soundEnabled ? 'Mute sounds' : 'Unmute sounds',\n          \"aria-pressed\": !settings.soundEnabled,\n          style: {\n            width: 36,\n            height: 36,\n            display: 'inline-flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            borderRadius: 6,\n            border: '1px solid rgba(255,255,255,0.06)',\n            background: settings.soundEnabled ? 'transparent' : 'rgba(255,255,255,0.02)'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            viewBox: \"0 0 24 24\",\n            width: \"18\",\n            height: \"18\",\n            \"aria-hidden\": \"true\",\n            focusable: \"false\",\n            style: {\n              display: 'block'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M3 10v4h4l5 5V5L7 10H3z\",\n              fill: \"currentColor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M16.5 7.5a4 4 0 010 9\",\n              stroke: \"currentColor\",\n              strokeWidth: \"1.6\",\n              fill: \"none\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), gameMode === 'idle' ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-primary btn-pulse\",\n          onClick: () => startGame(),\n          style: {\n            fontSize: 16,\n            padding: '8px 16px'\n          },\n          children: \"Game On\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              border: '1px solid rgba(255,255,255,0.06)',\n              borderRadius: 6,\n              overflow: 'hidden'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveView('card'),\n              className: `segmented ${activeView === 'card' ? 'segmented--active' : ''}`,\n              style: {\n                padding: '8px 12px',\n                background: activeView === 'card' ? '#0b3d91' : 'transparent',\n                color: '#fff',\n                border: 'none'\n              },\n              children: \"Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setActiveView('ball'),\n              className: `segmented ${activeView === 'ball' ? 'segmented--active' : ''}`,\n              style: {\n                padding: '8px 12px',\n                background: activeView === 'ball' ? '#0b3d91' : 'transparent',\n                color: '#fff',\n                border: 'none'\n              },\n              children: \"Ball\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-muted\",\n            onClick: () => {\n              setGameMode('idle');\n              setActiveView('card');\n            },\n            style: {\n              padding: '6px 10px'\n            },\n            children: \"Stop\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"left\",\n        children: [/*#__PURE__*/_jsxDEV(ImageUploader, {\n          onResult: setCardFromOCR\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DabOverlayControls, {\n          grid: grid,\n          defaults: gridDefaults,\n          setDefaults: setGridDefaults,\n          onDesign: openGridDesigner,\n          onClear: clearGrid,\n          playersRows: playersRows,\n          setPlayersRows: setPlayersRows,\n          playersCols: playersCols,\n          setPlayersCols: setPlayersCols\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PlayerList, {\n          playersRows: playersRows,\n          setPlayersRows: setPlayersRows,\n          playersCols: playersCols,\n          setPlayersCols: setPlayersCols,\n          showRows: gridDefaults === null || gridDefaults === void 0 ? void 0 : gridDefaults.showPlayerRows,\n          setShowRows: v => setGridDefaults(d => ({\n            ...d,\n            showPlayerRows: v\n          })),\n          showCols: gridDefaults === null || gridDefaults === void 0 ? void 0 : gridDefaults.showPlayerCols,\n          setShowCols: v => setGridDefaults(d => ({\n            ...d,\n            showPlayerCols: v\n          }))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BallPicker, {\n          maxBall: settings.maxBall,\n          setMaxBall: v => setSettings(s => ({\n            ...s,\n            maxBall: v\n          })),\n          autoMode: settings.autoMode,\n          setAutoMode: v => setSettings(s => ({\n            ...s,\n            autoMode: v\n          })),\n          called: called,\n          onCall: num => handleNumberCalled(num, {\n            auto: settings.autoMode\n          }),\n          resetGame: resetGame,\n          currentBall: currentBall\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), gridDesignerOpen && /*#__PURE__*/_jsxDEV(GridDesigner, {\n          imageUrl: displayImageUrl,\n          initialGrid: grid,\n          initialDefaults: gridDefaults,\n          onSave: saveGrid,\n          onCancel: closeGridDesigner,\n          playersRows: playersRows,\n          setPlayersRows: setPlayersRows,\n          playersCols: playersCols,\n          setPlayersCols: setPlayersCols\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"right\",\n        children: gameMode === 'idle' ? /*#__PURE__*/_jsxDEV(CardView, {\n          card: card,\n          playersRows: playersRows,\n          setPlayersRows: setPlayersRows,\n          playersCols: playersCols,\n          setPlayersCols: setPlayersCols,\n          dabbed: dabbed,\n          onToggleDab: toggleDab,\n          onToggleDabLine: toggleDabLine,\n          manualMode: !settings.autoMode,\n          setCard: setCard,\n          setDabbed: setDabbed,\n          imageUrl: displayImageUrl,\n          grid: grid\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'fixed',\n            inset: 0,\n            background: 'rgba(0,0,0,0.85)',\n            zIndex: 9998,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              height: '100%',\n              display: 'flex',\n              flexDirection: 'column'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                right: 12,\n                top: 12,\n                zIndex: 10000,\n                display: 'flex',\n                alignItems: 'center',\n                gap: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  border: '1px solid rgba(255,255,255,0.06)',\n                  borderRadius: 6,\n                  overflow: 'hidden'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveView('card'),\n                  style: {\n                    padding: '8px 12px',\n                    background: activeView === 'card' ? '#0b3d91' : 'transparent',\n                    color: '#fff',\n                    border: 'none'\n                  },\n                  children: \"Card\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveView('ball'),\n                  style: {\n                    padding: '8px 12px',\n                    background: activeView === 'ball' ? '#0b3d91' : 'transparent',\n                    color: '#fff',\n                    border: 'none'\n                  },\n                  children: \"Ball\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn-muted\",\n                onClick: () => {\n                  setGameMode('idle');\n                  setActiveView('card');\n                },\n                style: {\n                  padding: '6px 10px'\n                },\n                children: \"End Game\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 17\n            }, this), activeView === 'card' ? /*#__PURE__*/_jsxDEV(BingoCardView, {\n              card: card,\n              playersRows: playersRows,\n              setPlayersRows: setPlayersRows,\n              playersCols: playersCols,\n              setPlayersCols: setPlayersCols,\n              dabbed: dabbed,\n              onToggleDab: toggleDab,\n              onToggleDabLine: toggleDabLine,\n              manualMode: !settings.autoMode,\n              setCard: setCard,\n              setDabbed: setDabbed,\n              imageUrl: displayImageUrl,\n              grid: grid,\n              winner: winner,\n              onWinClose: () => setWinner(null)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(BingoBallView, {\n              onDraw: (num, opts) => handleNumberCalled(num, opts),\n              called: called,\n              currentBall: currentBall,\n              resetGame: resetGame,\n              maxBall: settings.maxBall,\n              setMaxBall: v => setSettings(s => ({\n                ...s,\n                maxBall: v\n              })),\n              autoMode: settings.autoMode,\n              setAutoMode: v => setSettings(s => ({\n                ...s,\n                autoMode: v\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmModal, {\n      open: !!pendingStartWarning,\n      title: \"Bingo Caller Pro\",\n      onConfirm: continueStart,\n      onCancel: cancelStart,\n      confirmLabel: \"Continue\",\n      cancelLabel: \"Cancel\",\n      children: [\"Grid contains \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          color: '#fff'\n        },\n        children: pendingStartWarning === null || pendingStartWarning === void 0 ? void 0 : pendingStartWarning.overlayCount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 23\n      }, this), \" numbered cells but Max Balls is set to \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        style: {\n          color: '#fff'\n        },\n        children: pendingStartWarning === null || pendingStartWarning === void 0 ? void 0 : pendingStartWarning.maxBall\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 138\n      }, this), \". Do you want to continue starting the game?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), !(gameMode === 'running' && activeView === 'card') && /*#__PURE__*/_jsxDEV(WinModal, {\n      open: winner !== null,\n      onClose: () => setWinner(null),\n      winner: winner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ListenerDebug, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"SjyzBSiJDdH4naXJA9JNYrmg6SM=\", false, function () {\n  return [useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage, useLocalStorage];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","ImageUploader","CardView","BallPicker","PlayerList","DabOverlayControls","GridDesigner","WinModal","BingoCardView","BingoBallView","ConfirmModal","ListenerDebug","useLocalStorage","fireConfetti","jsxDEV","_jsxDEV","Fragment","_Fragment","LS_KEYS","CARD","PLAYERS","DABBED","CALLED","SETTINGS","defaultEmptyCard","rows","cols","Array","from","length","App","_s","card","setCard","playersRows","setPlayersRows","playersCols","setPlayersCols","gridDefaults","setGridDefaults","order","scrambled","firstNum","overlayType","playerCount","playerRowOffset","playerColOffset","showPlayerRows","showPlayerCols","dabbed","setDabbed","called","setCalled","settings","setSettings","maxBall","autoMode","soundEnabled","imageRef","setImageRef","displayImageUrl","setDisplayImageUrl","startsWith","console","debug","cancelled","resolveImage","key","slice","getFile","file","warn","dataURL","Promise","resolve","reject","fr","FileReader","onload","result","onerror","readAsDataURL","err","error","currentBall","setCurrentBall","winner","setWinner","gameMode","setGameMode","activeView","setActiveView","pendingStartWarning","setPendingStartWarning","gridDesignerOpen","setGridDesignerOpen","grid","setGrid","_card$","newDab","setCardFromOCR","imageUrl","imgUrl","fallback","newDab2","openGridDesigner","closeGridDesigner","clearGrid","saveGrid","g","values","playerOverlay","showRows","showCols","toggleDab","r","c","prev","copy","map","row","handleNumberCalled","num","auto","next","String","_dabbed$","all","every","Boolean","_grid$playerOverlay","_grid$playerOverlay$r","player","axis","index","_grid$playerOverlay2","_grid$playerOverlay2$","resetGame","startGame","overlayCount","nums","Set","v","undefined","add","size","Number","continueStart","cancelStart","toggleDabLine","idx","className","children","style","display","alignItems","justifyContent","margin","gap","fontSize","width","height","viewBox","xmlns","flex","cx","cy","fill","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","x","y","textAnchor","fontWeight","color","onClick","s","padding","background","border","borderRadius","title","focusable","d","strokeLinecap","strokeLinejoin","overflow","onResult","defaults","setDefaults","onDesign","onClear","setShowRows","setShowCols","setMaxBall","setAutoMode","onCall","initialGrid","initialDefaults","onSave","onCancel","onToggleDab","onToggleDabLine","manualMode","position","inset","zIndex","flexDirection","right","top","onWinClose","onDraw","opts","open","onConfirm","confirmLabel","cancelLabel","onClose","_c","$RefreshReg$"],"sources":["C:/Users/Rande/bingocaller/src/App.js"],"sourcesContent":["/*\n  src/App.js\n  Main application container. Coordinates OCR upload, card state,\n  ball picker, dab logic, auto/manual modes, and win detection.\n*/\nimport React, { useEffect, useState, useCallback } from 'react'\nimport ImageUploader from './components/ImageUploader'\nimport CardView from './components/CardView'\nimport BallPicker from './components/BallPicker'\nimport PlayerList from './components/PlayerList'\nimport DabOverlayControls from './components/DabOverlayControls'\nimport GridDesigner from './components/GridDesigner'\nimport WinModal from './components/WinModal'\nimport BingoCardView from './components/BingoCardView'\nimport BingoBallView from './components/BingoBallView'\nimport ConfirmModal from './components/ConfirmModal'\nimport ListenerDebug from './components/ListenerDebug'\nimport { useLocalStorage } from './hooks/useLocalStorage'\nimport { fireConfetti } from './utils/confetti'\n\n// Keys for localStorage\nconst LS_KEYS = {\n  CARD: 'bingo_card',\n  PLAYERS: 'bingo_players',\n  DABBED: 'bingo_dabbed',\n  CALLED: 'bingo_called',\n  SETTINGS: 'bingo_settings'\n}\n\nfunction defaultEmptyCard(rows = 5, cols = 5) {\n  // generate an empty card of placeholders (null means empty cell)\n  return Array.from({ length: rows }, () => Array.from({ length: cols }, () => null))\n}\n\nexport default function App() {\n  // Persisted state via custom hook\n  const [card, setCard] = useLocalStorage(LS_KEYS.CARD, defaultEmptyCard())\n  // separate persisted lists for row/column players (to support player-only overlays)\n  const [playersRows, setPlayersRows] = useLocalStorage('bingo_players_rows', [])\n  const [playersCols, setPlayersCols] = useLocalStorage('bingo_players_cols', [])\n  // defaults to control whether row/col player labels are shown by default\n  const [gridDefaults, setGridDefaults] = useLocalStorage('bingo_grid_defaults', { rows: 20, cols: 5, order: 'column', scrambled: false, firstNum: 1, overlayType: 'dab', playerCount: 20, playerRowOffset: 110, playerColOffset: 36, showPlayerRows: true, showPlayerCols: false })\n  const [dabbed, setDabbed] = useLocalStorage(LS_KEYS.DABBED, null)\n  const [called, setCalled] = useLocalStorage(LS_KEYS.CALLED, [])\n  const [settings, setSettings] = useLocalStorage(LS_KEYS.SETTINGS, { maxBall: 75, autoMode: true, soundEnabled: true })\n  // persisted image reference: either a data URL, http URL, or an \"indexeddb:<key>\" marker\n  const [imageRef, setImageRef] = useLocalStorage('bingo_image_url', null)\n  // derived display URL (not persisted) used for rendering the <img src>\n  const [displayImageUrl, setDisplayImageUrl] = useState(null)\n\n  useEffect(() => {\n    // Guard against stale blob: URLs persisted to localStorage from previous sessions.\n    if (imageRef && typeof imageRef === 'string' && imageRef.startsWith('blob:')) {\n      console.debug('[App] Clearing stale blob URL from persisted imageRef')\n      setImageRef(null)\n    }\n  }, [imageRef, setImageRef])\n\n  // If we get an indexeddb: marker, load it from IndexedDB and convert to data URL for display\n  useEffect(() => {\n    let cancelled = false\n    async function resolveImage() {\n      if (!imageRef) { setDisplayImageUrl(null); return }\n      if (typeof imageRef === 'string' && imageRef.startsWith('indexeddb:')) {\n        const key = imageRef.slice('indexeddb:'.length)\n        try {\n          const { getFile } = await import('./utils/idb')\n          const file = await getFile(key)\n          if (!file) {\n            console.warn('[App] indexedDB entry not found for', key)\n            if (!cancelled) setImageRef(null)\n            return\n          }\n          // convert file to dataURL\n          const dataURL = await new Promise((resolve, reject) => {\n            const fr = new FileReader(); fr.onload = () => resolve(fr.result); fr.onerror = reject; fr.readAsDataURL(file)\n          })\n          if (!cancelled) setDisplayImageUrl(dataURL)\n        } catch (err) {\n          console.error('Error loading image from indexedDB', err)\n          if (!cancelled) setImageRef(null)\n        }\n      } else {\n        // regular URL or data URL\n        setDisplayImageUrl(imageRef)\n      }\n    }\n    resolveImage()\n    return () => { cancelled = true }\n  }, [imageRef, setImageRef])\n\n  const [currentBall, setCurrentBall] = useState(null)\n  const [winner, setWinner] = useState(null)\n  // game mode and active full-screen view\n  const [gameMode, setGameMode] = useState('idle') // 'idle' | 'running'\n  const [activeView, setActiveView] = useState('card') // 'card' | 'ball'\n  // pending start-time warning when overlay count doesn't match maxBall\n  const [pendingStartWarning, setPendingStartWarning] = useState(null)\n\n  // dab overlay grid state\n  const [gridDesignerOpen, setGridDesignerOpen] = useState(false)\n  const [grid, setGrid] = useLocalStorage('bingo_grid', null)\n  // defaults for designer (persisted)\n  // (gridDefaults declared earlier with player show flags)\n\n  // ensure dabbed matrix shape matches card\n  useEffect(() => {\n    if (!card) return\n    const rows = card.length\n    const cols = card[0]?.length || 0\n\n    // If the current grid does not include dab, explicitly clear any persisted dab state\n    if (!(grid?.overlayType === 'dab' || grid?.overlayType === 'both')) {\n      if (dabbed !== null) {\n        console.debug('[App] Clearing persisted dab state because overlay is not dab/both')\n        setDabbed(null)\n      }\n      return\n    }\n\n    // Otherwise ensure dabbed matrix shape matches card\n    if (!dabbed || dabbed.length !== rows || dabbed[0].length !== cols) {\n      const newDab = Array.from({ length: rows }, () => Array.from({ length: cols }, () => false))\n      setDabbed(newDab)\n    }\n  }, [card, grid])\n\n  // Called when OCR or manual edit produces a new card matrix.\n  const setCardFromOCR = ({ rows, imageUrl: imgUrl }) => {\n    // If rows were extracted from text, prefer them (simple case)\n    if (rows && rows.length > 0) {\n      setCard(rows)\n      setImageRef(imgUrl)\n      // reset dabbed when new card loaded ONLY when current grid overlay includes dab\n      if (grid?.overlayType === 'dab' || grid?.overlayType === 'both') {\n        const newDab = Array.from({ length: rows.length }, () => Array.from({ length: rows[0].length }, () => false))\n        setDabbed(newDab)\n      } else {\n        setDabbed(null)\n      }\n      // do NOT automatically change players or detect rows anymore\n      setCalled([])\n      setCurrentBall(null)\n      setWinner(null)\n      return\n    }\n\n    // Fallback: no structured rows, just set empty or text-derived\n    const fallback = rows || defaultEmptyCard()\n    setCard(fallback)\n    setImageRef(imgUrl)\n    if (grid?.overlayType === 'dab' || grid?.overlayType === 'both') {\n      const newDab2 = Array.from({ length: fallback.length }, () => Array.from({ length: fallback[0].length }, () => false))\n      setDabbed(newDab2)\n    } else {\n      setDabbed(null)\n    }\n    setCalled([])\n    setCurrentBall(null)\n    setWinner(null)\n    return\n  }\n\n  // Grid designer actions\n  const openGridDesigner = () => setGridDesignerOpen(true)\n  const closeGridDesigner = () => setGridDesignerOpen(false)\n  const clearGrid = () => { setGrid(null) }\n\n  const saveGrid = (g) => {\n    // g: { bbox, rows, cols, numbering, values, overlayType }\n    setGrid(g)\n    // populate card matrix from values\n      if (g && g.values) {\n      setCard(g.values)\n      // initialize dabbed only when overlayType includes dab\n      if (g.overlayType === 'dab' || g.overlayType === 'both') {\n        setDabbed(Array.from({ length: g.rows }, () => Array.from({ length: g.cols }, () => false)))\n      } else {\n        // explicitly clear any existing dabbed state when saving a player-only overlay\n        setDabbed(null)\n      }\n      // update global player lists based on what the designer saved (if present)\n      if (g.playerOverlay) {\n        if (g.playerOverlay.showRows) setPlayersRows(g.playerOverlay.rows.slice(0, g.rows))\n        if (g.playerOverlay.showCols) setPlayersCols(g.playerOverlay.cols.slice(0, g.cols))\n      }\n    }\n    // If overlay doesn't include dab, also ensure any previous winner state is cleared\n    if (!(g.overlayType === 'dab' || g.overlayType === 'both')) {\n      setWinner(null)\n      setCalled([])\n      setCurrentBall(null)\n    }\n    setGridDesignerOpen(false)\n  }\n\n  // toggle dab for a specific cell (manual)\n  const toggleDab = (r, c) => {\n    // if dab overlay is not active/initialized, ignore manual toggles\n    if (!dabbed) return\n    setDabbed(prev => {\n      const copy = prev.map(row => row.slice())\n      copy[r][c] = !copy[r][c]\n      return copy\n    })\n  }\n\n  // When a number is called, mark any matching numbers on the card as dabbed (auto)\n  const handleNumberCalled = useCallback((num, { auto } = { auto: false }) => {\n    setCalled(prev => {\n      const next = [...prev, num]\n      return next\n    })\n    setCurrentBall(num)\n    if (auto && dabbed) {\n      setDabbed(prev => {\n        const copy = prev.map(row => row.slice())\n        for (let r = 0; r < card.length; r++) {\n          for (let c = 0; c < (card[r] || []).length; c++) {\n            if (String(card[r][c]) === String(num)) copy[r][c] = true\n          }\n        }\n        return copy\n      })\n    }\n  }, [card, dabbed])\n\n  // On any dab change, check for full-row wins\n  useEffect(() => {\n    if (!dabbed) return\n    // check rows\n    for (let r = 0; r < dabbed.length; r++) {\n      const row = dabbed[r]\n      const all = row.every(Boolean)\n      if (all) {\n        const player = grid?.playerOverlay?.rows?.[r]\n        setWinner({ axis: 'row', index: r, player })\n        fireConfetti()\n        return\n      }\n    }\n    // check columns\n    const cols = dabbed[0]?.length || 0\n    for (let c = 0; c < cols; c++) {\n      let all = true\n      for (let r = 0; r < dabbed.length; r++) {\n        if (!dabbed[r][c]) { all = false; break }\n      }\n      if (all) {\n        const player = grid?.playerOverlay?.cols?.[c]\n        setWinner({ axis: 'col', index: c, player })\n        fireConfetti()\n        return\n      }\n    }\n  }, [dabbed, grid])\n\n  const resetGame = () => {\n    setCalled([])\n    setCurrentBall(null)\n    if (dabbed) setDabbed(prev => prev.map(row => row.map(() => false)))\n    setWinner(null)\n  }\n\n  // Initiate game mode with optional validation that the saved grid count matches the configured maxBall\n  const startGame = () => {\n    // compute number of distinct numbered cells in the saved grid (if any)\n    let overlayCount = 0\n    if (grid && grid.values) {\n      const nums = new Set()\n      for (let r = 0; r < grid.values.length; r++) {\n        const row = grid.values[r] || []\n        for (let c = 0; c < row.length; c++) {\n          const v = row[c]\n          if (v !== null && v !== undefined && v !== '') nums.add(String(v))\n        }\n      }\n      overlayCount = nums.size\n    } else if (grid && grid.rows && grid.cols) {\n      overlayCount = Number(grid.rows) * Number(grid.cols)\n    }\n\n      if (overlayCount && overlayCount !== settings.maxBall) {\n      // show our themed modal instead of native confirm\n      setPendingStartWarning({ overlayCount, maxBall: settings.maxBall })\n      return\n    }\n\n    resetGame()\n    setGameMode('running')\n    setActiveView('card')\n  }\n\n  const continueStart = () => {\n    setPendingStartWarning(null)\n    resetGame()\n    setGameMode('running')\n    setActiveView('card')\n  }\n\n  const cancelStart = () => {\n    setPendingStartWarning(null)\n  }\n\n\n  const toggleDabLine = (axis, idx) => {\n    // ignore if dab overlay not present\n    if (!dabbed) return\n    setDabbed(prev => {\n      const copy = prev.map(r=>r.slice())\n      if (axis === 'row') {\n        const all = copy[idx].every(Boolean)\n        for (let c=0;c<copy[idx].length;c++) copy[idx][c] = !all\n      } else {\n        // col\n        const rows = copy.length\n        let all = true\n        for (let r=0;r<rows;r++) if(!copy[r][idx]) { all = false; break }\n        for (let r=0;r<rows;r++) copy[r][idx] = !all\n      }\n      return copy\n    })\n  }\n\n  return (\n    <div className=\"app-root\">\n      <header className=\"topbar\" style={{display:'flex',alignItems:'center',justifyContent:'space-between'}}>\n        <h1 style={{margin:0,display:'flex',alignItems:'center',gap:8,fontSize:18}}>\n          <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" style={{flex:'0 0 1em'}}>\n            <circle cx=\"32\" cy=\"32\" r=\"30\" fill=\"#fde68a\" stroke=\"#c47c00\" strokeWidth=\"3\" />\n            <circle cx=\"26\" cy=\"22\" r=\"6\" fill=\"white\" />\n            <text x=\"32\" y=\"38\" textAnchor=\"middle\" fontSize=\"18\" fontWeight=\"700\" fill=\"#9b3412\">B</text>\n          </svg>\n          Bingo Caller Pro\n        </h1>\n        <div style={{display:'flex',alignItems:'center',gap:12}}>\n          <div style={{display:'flex',alignItems:'center',gap:8}}>\n            <div style={{fontSize:12,color:'#cbd5e1'}}>Auto:</div>\n            <button onClick={()=> setSettings(s => ({ ...s, autoMode: !s.autoMode }))} style={{padding:'6px 10px',background: settings.autoMode ? '#0b3d91' : 'transparent',color:'#fff',border: '1px solid rgba(255,255,255,0.06)',borderRadius:6}}>{settings.autoMode ? 'On' : 'Off'}</button>\n          </div>\n\n          {/* sound toggle: single global control for all app sounds */}\n          <button\n            className={`sound-toggle ${settings.soundEnabled ? '' : 'muted'}`}\n            onClick={() => setSettings(s => ({ ...s, soundEnabled: !s.soundEnabled }))}\n            title={settings.soundEnabled ? 'Mute sounds' : 'Unmute sounds'}\n            aria-pressed={!settings.soundEnabled}\n            style={{width:36,height:36,display:'inline-flex',alignItems:'center',justifyContent:'center',borderRadius:6,border:'1px solid rgba(255,255,255,0.06)',background: settings.soundEnabled ? 'transparent' : 'rgba(255,255,255,0.02)'}}\n          >\n            <svg viewBox=\"0 0 24 24\" width=\"18\" height=\"18\" aria-hidden=\"true\" focusable=\"false\" style={{display:'block'}}>\n              <path d=\"M3 10v4h4l5 5V5L7 10H3z\" fill=\"currentColor\" />\n              <path d=\"M16.5 7.5a4 4 0 010 9\" stroke=\"currentColor\" strokeWidth=\"1.6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n            </svg>\n          </button>\n\n          {gameMode === 'idle' ? (\n            <button className=\"btn-primary btn-pulse\" onClick={() => startGame()} style={{fontSize:16,padding:'8px 16px'}}>Game On</button>\n          ) : (\n            <>\n              <div style={{display:'flex',border:'1px solid rgba(255,255,255,0.06)',borderRadius:6,overflow:'hidden'}}>\n                <button onClick={() => setActiveView('card')} className={`segmented ${activeView==='card' ? 'segmented--active' : ''}`} style={{padding:'8px 12px',background: activeView==='card' ? '#0b3d91' : 'transparent',color:'#fff',border:'none'}}>Card</button>\n                <button onClick={() => setActiveView('ball')} className={`segmented ${activeView==='ball' ? 'segmented--active' : ''}`} style={{padding:'8px 12px',background: activeView==='ball' ? '#0b3d91' : 'transparent',color:'#fff',border:'none'}}>Ball</button>\n              </div>\n              <button className=\"btn-muted\" onClick={() => { setGameMode('idle'); setActiveView('card') }} style={{padding:'6px 10px'}}>Stop</button>\n            </>\n          )}\n        </div>\n      </header>\n      <main className=\"main\">\n        <section className=\"left\">\n          <ImageUploader onResult={setCardFromOCR} />\n          <DabOverlayControls grid={grid} defaults={gridDefaults} setDefaults={setGridDefaults} onDesign={openGridDesigner} onClear={clearGrid} playersRows={playersRows} setPlayersRows={setPlayersRows} playersCols={playersCols} setPlayersCols={setPlayersCols} />\n          <PlayerList playersRows={playersRows} setPlayersRows={setPlayersRows} playersCols={playersCols} setPlayersCols={setPlayersCols} showRows={gridDefaults?.showPlayerRows} setShowRows={(v)=>setGridDefaults(d=>({ ...d, showPlayerRows: v }))} showCols={gridDefaults?.showPlayerCols} setShowCols={(v)=>setGridDefaults(d=>({ ...d, showPlayerCols: v }))} />\n          <BallPicker\n            maxBall={settings.maxBall}\n            setMaxBall={(v) => setSettings(s => ({ ...s, maxBall: v }))}\n            autoMode={settings.autoMode}\n            setAutoMode={(v) => setSettings(s => ({ ...s, autoMode: v }))}\n            called={called}\n            onCall={(num) => handleNumberCalled(num, { auto: settings.autoMode })}\n            resetGame={resetGame}\n            currentBall={currentBall}\n          />\n          {gridDesignerOpen && (\n            <GridDesigner imageUrl={displayImageUrl} initialGrid={grid} initialDefaults={gridDefaults} onSave={saveGrid} onCancel={closeGridDesigner} playersRows={playersRows} setPlayersRows={setPlayersRows} playersCols={playersCols} setPlayersCols={setPlayersCols} />\n          )}\n        </section>\n        <section className=\"right\">\n          {gameMode === 'idle' ? (\n            <CardView\n              card={card}\n              playersRows={playersRows}\n              setPlayersRows={setPlayersRows}\n              playersCols={playersCols}\n              setPlayersCols={setPlayersCols}\n              dabbed={dabbed}\n              onToggleDab={toggleDab}\n              onToggleDabLine={toggleDabLine}\n              manualMode={!settings.autoMode}\n              setCard={setCard}\n              setDabbed={setDabbed}\n              imageUrl={displayImageUrl}\n              grid={grid}\n            />\n          ) : (\n            <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,0.85)',zIndex:9998,display:'flex',alignItems:'center',justifyContent:'center'}}>\n              <div style={{width:'100%',height:'100%',display:'flex',flexDirection:'column'}}>\n                {/* toolbar visible in fullscreen overlay for switching and ending game */}\n                <div style={{position:'absolute',right:12,top:12,zIndex:10000,display:'flex',alignItems:'center',gap:8}}>\n                  <div style={{display:'flex',border:'1px solid rgba(255,255,255,0.06)',borderRadius:6,overflow:'hidden'}}>\n                    <button onClick={() => setActiveView('card')} style={{padding:'8px 12px',background: activeView==='card' ? '#0b3d91' : 'transparent',color:'#fff',border:'none'}}>Card</button>\n                    <button onClick={() => setActiveView('ball')} style={{padding:'8px 12px',background: activeView==='ball' ? '#0b3d91' : 'transparent',color:'#fff',border:'none'}}>Ball</button>\n                  </div>\n                  <button className=\"btn-muted\" onClick={() => { setGameMode('idle'); setActiveView('card') }} style={{padding:'6px 10px'}}>End Game</button>\n                </div>\n\n                {activeView === 'card' ? (\n                  <BingoCardView\n                    card={card}\n                    playersRows={playersRows}\n                    setPlayersRows={setPlayersRows}\n                    playersCols={playersCols}\n                    setPlayersCols={setPlayersCols}\n                    dabbed={dabbed}\n                    onToggleDab={toggleDab}\n                    onToggleDabLine={toggleDabLine}\n                    manualMode={!settings.autoMode}\n                    setCard={setCard}\n                    setDabbed={setDabbed}\n                    imageUrl={displayImageUrl}\n                    grid={grid}\n                    winner={winner}\n                    onWinClose={() => setWinner(null)}\n                  />\n                ) : (\n                  <BingoBallView\n                    onDraw={(num, opts) => handleNumberCalled(num, opts)}\n                    called={called}\n                    currentBall={currentBall}\n                    resetGame={resetGame}\n                    maxBall={settings.maxBall}\n                    setMaxBall={(v) => setSettings(s => ({ ...s, maxBall: v }))}\n                    autoMode={settings.autoMode}\n                    setAutoMode={(v) => setSettings(s => ({ ...s, autoMode: v }))}\n                  />\n                )}\n              </div>\n            </div>\n          )}\n        </section>\n      </main>\n      {/* Themed start-time warning modal (replaces confirm) */}\n      <ConfirmModal open={!!pendingStartWarning} title={\"Bingo Caller Pro\"} onConfirm={continueStart} onCancel={cancelStart} confirmLabel=\"Continue\" cancelLabel=\"Cancel\">\n        Grid contains <strong style={{color:'#fff'}}>{pendingStartWarning?.overlayCount}</strong> numbered cells but Max Balls is set to <strong style={{color:'#fff'}}>{pendingStartWarning?.maxBall}</strong>. Do you want to continue starting the game?\n      </ConfirmModal>\n\n      {/* When in game card fullscreen the modal is rendered inside BingoCardView; otherwise show the WinModal globally */}\n      {!(gameMode === 'running' && activeView === 'card') && (\n        <WinModal\n          open={winner !== null}\n          onClose={() => setWinner(null)}\n          winner={winner}\n        />\n      )}\n      <ListenerDebug />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}