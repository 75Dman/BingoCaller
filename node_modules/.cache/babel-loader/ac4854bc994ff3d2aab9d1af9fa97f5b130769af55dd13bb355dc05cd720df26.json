{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rande\\\\bingocaller\\\\src\\\\components\\\\GridDesigner.js\",\n  _s = $RefreshSig$();\n/*\r\n  src/components/GridDesigner.js\r\n  Minimal grid designer overlay: draw rectangle, set rows/cols, choose ordering\r\n  and either auto-fill sequential numbers (column-major default) or manual fill.\r\n*/\nimport React, { useRef, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction clamp(v, a, b) {\n  return Math.max(a, Math.min(b, v));\n}\nexport default function GridDesigner({\n  imageUrl,\n  initialGrid,\n  initialDefaults,\n  onSave,\n  onCancel,\n  playersRows,\n  setPlayersRows,\n  playersCols,\n  setPlayersCols\n}) {\n  _s();\n  var _ref, _initialGrid$rows, _ref2, _initialGrid$cols, _initialGrid$numberin, _initialGrid$numberin2, _ref3, _initialGrid$numberin3, _initialGrid$numberin4, _initialGrid$numberin5, _initialGrid$numberin6, _initialGrid$playerOv, _initialGrid$playerOv2, _initialGrid$playerOv3, _initialGrid$playerOv4, _initialDefaults$play, _initialGrid$playerOv5, _initialGrid$playerOv6, _initialDefaults$play2, _initialGrid$playerOv7, _initialGrid$playerOv8, _initialDefaults$show, _initialGrid$playerOv9, _initialGrid$playerOv0, _initialDefaults$show2;\n  const imgRef = useRef(null);\n  const containerRef = useRef(null);\n  const [drawing, setDrawing] = useState(false);\n  const [rect, setRect] = useState(initialGrid !== null && initialGrid !== void 0 && initialGrid.bbox ? {\n    ...initialGrid.bbox\n  } : null);\n  const [startPt, setStartPt] = useState(null);\n  const [rows, setRows] = useState((_ref = (_initialGrid$rows = initialGrid === null || initialGrid === void 0 ? void 0 : initialGrid.rows) !== null && _initialGrid$rows !== void 0 ? _initialGrid$rows : initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.rows) !== null && _ref !== void 0 ? _ref : 5);\n  const [cols, setCols] = useState((_ref2 = (_initialGrid$cols = initialGrid === null || initialGrid === void 0 ? void 0 : initialGrid.cols) !== null && _initialGrid$cols !== void 0 ? _initialGrid$cols : initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.cols) !== null && _ref2 !== void 0 ? _ref2 : 20);\n  const [order, setOrder] = useState((initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$numberin = initialGrid.numbering) === null || _initialGrid$numberin === void 0 ? void 0 : _initialGrid$numberin.order) || (initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.order) || 'column');\n  const [scrambled, setScrambled] = useState((initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$numberin2 = initialGrid.numbering) === null || _initialGrid$numberin2 === void 0 ? void 0 : _initialGrid$numberin2.mode) === 'manual' || (initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.scrambled) || false);\n  const [firstNum, setFirstNum] = useState((_ref3 = (_initialGrid$numberin3 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$numberin4 = initialGrid.numbering) === null || _initialGrid$numberin4 === void 0 ? void 0 : _initialGrid$numberin4.first) !== null && _initialGrid$numberin3 !== void 0 ? _initialGrid$numberin3 : initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.firstNum) !== null && _ref3 !== void 0 ? _ref3 : 1);\n  const [lastNum, setLastNum] = useState((_initialGrid$numberin5 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$numberin6 = initialGrid.numbering) === null || _initialGrid$numberin6 === void 0 ? void 0 : _initialGrid$numberin6.last) !== null && _initialGrid$numberin5 !== void 0 ? _initialGrid$numberin5 : rows * cols);\n  const [values, setValues] = useState((initialGrid === null || initialGrid === void 0 ? void 0 : initialGrid.values) || null);\n  // overlay/player mode\n  const [overlayType, setOverlayType] = useState(initialGrid !== null && initialGrid !== void 0 && initialGrid.playerOverlay ? (initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.overlayType) || 'both' : (initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.overlayType) || 'dab');\n  const [playerRows, setPlayerRows] = useState((initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv = initialGrid.playerOverlay) === null || _initialGrid$playerOv === void 0 ? void 0 : _initialGrid$playerOv.rows) || playersRows || Array.from({\n    length: rows\n  }, (_, i) => `Player ${i + 1}`));\n  const [playerCols, setPlayerCols] = useState((initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv2 = initialGrid.playerOverlay) === null || _initialGrid$playerOv2 === void 0 ? void 0 : _initialGrid$playerOv2.cols) || playersCols || Array.from({\n    length: cols\n  }, (_, i) => `Player ${i + 1}`));\n  const [rowOffset, setRowOffset] = useState((_initialGrid$playerOv3 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv4 = initialGrid.playerOverlay) === null || _initialGrid$playerOv4 === void 0 ? void 0 : _initialGrid$playerOv4.rowOffset) !== null && _initialGrid$playerOv3 !== void 0 ? _initialGrid$playerOv3 : (_initialDefaults$play = initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.playerRowOffset) !== null && _initialDefaults$play !== void 0 ? _initialDefaults$play : 110);\n  const [colOffset, setColOffset] = useState((_initialGrid$playerOv5 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv6 = initialGrid.playerOverlay) === null || _initialGrid$playerOv6 === void 0 ? void 0 : _initialGrid$playerOv6.colOffset) !== null && _initialGrid$playerOv5 !== void 0 ? _initialGrid$playerOv5 : (_initialDefaults$play2 = initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.playerColOffset) !== null && _initialDefaults$play2 !== void 0 ? _initialDefaults$play2 : 36);\n  const [showPlayerRows, setShowPlayerRows] = useState((_initialGrid$playerOv7 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv8 = initialGrid.playerOverlay) === null || _initialGrid$playerOv8 === void 0 ? void 0 : _initialGrid$playerOv8.showRows) !== null && _initialGrid$playerOv7 !== void 0 ? _initialGrid$playerOv7 : (_initialDefaults$show = initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.showPlayerRows) !== null && _initialDefaults$show !== void 0 ? _initialDefaults$show : true);\n  const [showPlayerCols, setShowPlayerCols] = useState((_initialGrid$playerOv9 = initialGrid === null || initialGrid === void 0 ? void 0 : (_initialGrid$playerOv0 = initialGrid.playerOverlay) === null || _initialGrid$playerOv0 === void 0 ? void 0 : _initialGrid$playerOv0.showCols) !== null && _initialGrid$playerOv9 !== void 0 ? _initialGrid$playerOv9 : (_initialDefaults$show2 = initialDefaults === null || initialDefaults === void 0 ? void 0 : initialDefaults.showPlayerCols) !== null && _initialDefaults$show2 !== void 0 ? _initialDefaults$show2 : false);\n\n  // divider positions (px offsets inside rect)\n  const [rowPos, setRowPos] = useState(null); // length rows+1\n  const [colPos, setColPos] = useState(null); // length cols+1\n  const dragRef = useRef(null); // {type:'row'|'col'|'resize'|'move', idx, startClient, startPos}\n  const addedListenersRef = useRef(null); // store actual added listener references so they can be removed reliably\n  const [hoverEdges, setHoverEdges] = useState({\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  });\n\n  // initialize row/col positions when rect or rows/cols change\n  useEffect(() => {\n    if (!rect) return;\n    const h = rect.y1 - rect.y0;\n    const w = rect.x1 - rect.x0;\n    const rp = Array.from({\n      length: rows + 1\n    }, (_, i) => Math.round(i * h / rows));\n    const cp = Array.from({\n      length: cols + 1\n    }, (_, i) => Math.round(i * w / cols));\n    setRowPos(rp);\n    setColPos(cp);\n    // ensure player arrays match sizes locally\n    setPlayerRows(prev => {\n      const next = (prev || []).slice(0, rows);\n      while (next.length < rows) next.push(`Player ${next.length + 1}`);\n      return next;\n    });\n    setPlayerCols(prev => {\n      const next = (prev || []).slice(0, cols);\n      while (next.length < cols) next.push(`Player ${next.length + 1}`);\n      return next;\n    });\n    // sync local names from global lists if provided (keeps designer up-to-date when PlayerList changes)\n    if (playersRows) {\n      const next = (playersRows || []).slice(0, rows);\n      while (next.length < rows) next.push(`Player ${next.length + 1}`);\n      setPlayerRows(next);\n    }\n    if (playersCols) {\n      const next = (playersCols || []).slice(0, cols);\n      while (next.length < cols) next.push(`Player ${next.length + 1}`);\n      setPlayerCols(next);\n    }\n    // also sync global player lists if setters were provided\n    if (setPlayersRows) setPlayersRows(prev => {\n      const next = (prev || []).slice(0, rows);\n      while (next.length < rows) next.push(`Player ${next.length + 1}`);\n      return next;\n    });\n    if (setPlayersCols) setPlayersCols(prev => {\n      const next = (prev || []).slice(0, cols);\n      while (next.length < cols) next.push(`Player ${next.length + 1}`);\n      return next;\n    });\n  }, [rect, rows, cols]);\n  useEffect(() => {\n    setLastNum(rows * cols);\n  }, [rows, cols]);\n\n  // keep local player arrays in sync when global player lists change\n  useEffect(() => {\n    if (!playersRows) return;\n    const next = (playersRows || []).slice(0, rows);\n    while (next.length < rows) next.push(`Player ${next.length + 1}`);\n    setPlayerRows(next);\n  }, [playersRows, rows]);\n  useEffect(() => {\n    if (!playersCols) return;\n    const next = (playersCols || []).slice(0, cols);\n    while (next.length < cols) next.push(`Player ${next.length + 1}`);\n    setPlayerCols(next);\n  }, [playersCols, cols]);\n\n  // Mouse/touch handlers to draw bbox relative to image client rect\n  const cornerTol = 14;\n  const onPointerDown = e => {\n    if (!containerRef.current) return;\n    const rectC = containerRef.current.getBoundingClientRect();\n    const x = e.clientX - rectC.left;\n    const y = e.clientY - rectC.top;\n\n    // If rect exists, check for edge/corner proximity for resize/move\n    if (rect) {\n      const rx0 = rect.x0,\n        ry0 = rect.y0,\n        rx1 = rect.x1,\n        ry1 = rect.y1;\n      const nearLeft = Math.abs(x - rx0) <= cornerTol;\n      const nearRight = Math.abs(x - rx1) <= cornerTol;\n      const nearTop = Math.abs(y - ry0) <= cornerTol;\n      const nearBottom = Math.abs(y - ry1) <= cornerTol;\n      const inside = x >= rx0 && x <= rx1 && y >= ry0 && y <= ry1;\n      if (nearLeft || nearRight || nearTop || nearBottom) {\n        // start resizing from the corner/edge\n        dragRef.current = {\n          type: 'resize',\n          edges: {\n            left: nearLeft,\n            right: nearRight,\n            top: nearTop,\n            bottom: nearBottom\n          },\n          startClientX: e.clientX,\n          startClientY: e.clientY,\n          startRect: {\n            ...rect\n          }\n        };\n        // store exact references so we can remove the same functions later\n        addedListenersRef.current = {\n          move: onPointerMove,\n          up: endDrag\n        };\n        window.addEventListener('mousemove', onPointerMove);\n        window.addEventListener('mouseup', endDrag);\n        // dev-only listener tracking\n        import('../utils/listenerTracker').then(m => {\n          m.registerListener('mousemove');\n          m.registerListener('mouseup');\n        }).catch(() => {});\n        return;\n      }\n      if (inside) {\n        // start moving the whole rect\n        dragRef.current = {\n          type: 'move',\n          startClientX: e.clientX,\n          startClientY: e.clientY,\n          startRect: {\n            ...rect\n          }\n        };\n        addedListenersRef.current = {\n          move: onPointerMove,\n          up: endDrag\n        };\n        window.addEventListener('mousemove', onPointerMove);\n        window.addEventListener('mouseup', endDrag);\n        // dev-only listener tracking\n        import('../utils/listenerTracker').then(m => {\n          m.registerListener('mousemove');\n          m.registerListener('mouseup');\n        }).catch(() => {});\n        return;\n      }\n\n      // Clicked outside rect: allow starting a new draw anchored at the opposite corner\n      const anchorX = x < rx0 ? rx1 : x > rx1 ? rx0 : Math.abs(x - rx0) > Math.abs(x - rx1) ? rx0 : rx1;\n      const anchorY = y < ry0 ? ry1 : y > ry1 ? ry0 : Math.abs(y - ry0) > Math.abs(y - ry1) ? ry0 : ry1;\n      setStartPt({\n        x: anchorX,\n        y: anchorY\n      });\n      setDrawing(true);\n      return;\n    }\n\n    // otherwise start a new draw\n    setStartPt({\n      x,\n      y\n    });\n    setDrawing(true);\n  };\n  const safeNumber = (v, d = 0) => Number.isFinite(Number(v)) ? Number(v) : d;\n  const onPointerMove = e => {\n    // update hover state even when not dragging\n    if (!containerRef.current) return;\n    const rectC = containerRef.current.getBoundingClientRect();\n    const x = e.clientX - rectC.left;\n    const y = e.clientY - rectC.top;\n    if (!dragRef.current && rect && !drawing) {\n      const rx0 = rect.x0,\n        ry0 = rect.y0,\n        rx1 = rect.x1,\n        ry1 = rect.y1;\n      const nearLeft = Math.abs(x - rx0) <= cornerTol;\n      const nearRight = Math.abs(x - rx1) <= cornerTol;\n      const nearTop = Math.abs(y - ry0) <= cornerTol;\n      const nearBottom = Math.abs(y - ry1) <= cornerTol;\n      setHoverEdges({\n        left: nearLeft,\n        right: nearRight,\n        top: nearTop,\n        bottom: nearBottom\n      });\n      // set cursor\n      if (nearLeft || nearRight) containerRef.current.style.cursor = 'ew-resize';else if (nearTop || nearBottom) containerRef.current.style.cursor = 'ns-resize';else containerRef.current.style.cursor = '';\n    }\n    if (dragRef.current) {\n      if (dragRef.current.type === 'row') {\n        const dy = e.clientY - dragRef.current.startClient;\n        setRowPos(prev => {\n          const next = prev.slice();\n          const idx = dragRef.current.idx;\n          const newVal = clamp(dragRef.current.startPos + dy, 0, rectC.height);\n          // enforce min cell px\n          const min = minCellPx;\n          if (newVal - next[idx - 1] < min) return prev;\n          if (next[idx + 1] - newVal < min) return prev;\n          next[idx] = Math.round(newVal);\n          return next;\n        });\n      } else if (dragRef.current.type === 'col') {\n        const dx = e.clientX - dragRef.current.startClient;\n        setColPos(prev => {\n          const next = prev.slice();\n          const idx = dragRef.current.idx;\n          const newVal = clamp(dragRef.current.startPos + dx, 0, rectC.width);\n          const min = minCellPx;\n          if (newVal - next[idx - 1] < min) return prev;\n          if (next[idx + 1] - newVal < min) return prev;\n          next[idx] = Math.round(newVal);\n          return next;\n        });\n      } else if (dragRef.current.type === 'resize') {\n        const dr = dragRef.current;\n        const dx = e.clientX - dr.startClientX;\n        const dy = e.clientY - dr.startClientY;\n        const s = dr.startRect;\n        let nx0 = s.x0,\n          ny0 = s.y0,\n          nx1 = s.x1,\n          ny1 = s.y1;\n        if (dr.edges.left) nx0 = clamp(s.x0 + dx, 0, s.x1 - minCellPx * cols);\n        if (dr.edges.right) nx1 = clamp(s.x1 + dx, nx0 + minCellPx * cols, rectC.width);\n        if (dr.edges.top) ny0 = clamp(s.y0 + dy, 0, s.y1 - minCellPx * rows);\n        if (dr.edges.bottom) ny1 = clamp(s.y1 + dy, ny0 + minCellPx * rows, rectC.height);\n        setRect({\n          x0: nx0,\n          y0: ny0,\n          x1: nx1,\n          y1: ny1\n        });\n      } else if (dragRef.current.type === 'move') {\n        const dr = dragRef.current;\n        const dx = e.clientX - dr.startClientX;\n        const dy = e.clientY - dr.startClientY;\n        const s = dr.startRect;\n        const width = s.x1 - s.x0;\n        const height = s.y1 - s.y0;\n        const nx0 = clamp(s.x0 + dx, 0, rectC.width - width);\n        const ny0 = clamp(s.y0 + dy, 0, rectC.height - height);\n        setRect({\n          x0: nx0,\n          y0: ny0,\n          x1: nx0 + width,\n          y1: ny0 + height\n        });\n      }\n      return;\n    }\n    if (!drawing || !startPt || !containerRef.current) return;\n    const xClamped = clamp(x, 0, rectC.width);\n    const yClamped = clamp(y, 0, rectC.height);\n    const x0 = Math.min(startPt.x, xClamped);\n    const y0 = Math.min(startPt.y, yClamped);\n    const x1 = Math.max(startPt.x, xClamped);\n    const y1 = Math.max(startPt.y, yClamped);\n    setRect({\n      x0,\n      y0,\n      x1,\n      y1\n    });\n  };\n  const finishDraw = () => {\n    setDrawing(false);\n    setStartPt(null);\n    setHoverEdges({\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    });\n    if (containerRef.current) containerRef.current.style.cursor = '';\n  };\n\n  // start dragging a divider\n  const startDrag = (type, idx, e) => {\n    if (!containerRef.current) return;\n    e.stopPropagation();\n    e.preventDefault();\n    const rectC = containerRef.current.getBoundingClientRect();\n    if (type === 'row') {\n      dragRef.current = {\n        type: 'row',\n        idx,\n        startClient: e.clientY,\n        startPos: rowPos[idx]\n      };\n    } else {\n      dragRef.current = {\n        type: 'col',\n        idx,\n        startClient: e.clientX,\n        startPos: colPos[idx]\n      };\n    }\n    // attach global listeners and remember the exact references so they can be removed\n    addedListenersRef.current = {\n      move: onPointerMove,\n      up: endDrag\n    };\n    window.addEventListener('mousemove', onPointerMove);\n    window.addEventListener('mouseup', endDrag);\n    import('../utils/listenerTracker').then(m => {\n      m.registerListener('mousemove');\n      m.registerListener('mouseup');\n    }).catch(() => {});\n  };\n  const endDrag = () => {\n    dragRef.current = null;\n    if (addedListenersRef.current) {\n      window.removeEventListener('mousemove', addedListenersRef.current.move);\n      window.removeEventListener('mouseup', addedListenersRef.current.up);\n      // dev-only tracking cleanup\n      import('../utils/listenerTracker').then(m => {\n        m.unregisterListener('mousemove');\n        m.unregisterListener('mouseup');\n      }).catch(() => {});\n      addedListenersRef.current = null;\n    } else {\n      // fallback: try removing the handlers directly\n      window.removeEventListener('mousemove', onPointerMove);\n      window.removeEventListener('mouseup', endDrag);\n      import('../utils/listenerTracker').then(m => {\n        m.unregisterListener('mousemove');\n        m.unregisterListener('mouseup');\n      }).catch(() => {});\n    }\n  };\n\n  // Ensure any leftover global listeners are cleaned up on unmount (safety net)\n  useEffect(() => {\n    return () => {\n      if (addedListenersRef.current) {\n        window.removeEventListener('mousemove', addedListenersRef.current.move);\n        window.removeEventListener('mouseup', addedListenersRef.current.up);\n        addedListenersRef.current = null;\n      }\n    };\n  }, []);\n\n  // Dragging player label offsets (row labels drag horizontally to adjust rowOffset; column labels drag vertically to adjust colOffset)\n  const labelDragRef = useRef(null);\n  const labelListenersRef = useRef(null);\n  const startLabelDrag = (type, e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!containerRef.current || !rect) return;\n    const start = type === 'row' ? e.clientX : e.clientY;\n    labelDragRef.current = {\n      type,\n      start,\n      startOffset: type === 'row' ? rowOffset : colOffset\n    };\n    const onMove = ev => {\n      if (!labelDragRef.current) return;\n      const delta = labelDragRef.current.type === 'row' ? ev.clientX - labelDragRef.current.start : ev.clientY - labelDragRef.current.start;\n      if (labelDragRef.current.type === 'row') setRowOffset(Math.max(4, Math.round(labelDragRef.current.startOffset - delta)));else setColOffset(Math.max(4, Math.round(labelDragRef.current.startOffset - delta)));\n    };\n    const onUp = () => {\n      labelDragRef.current = null;\n      if (labelListenersRef.current) {\n        window.removeEventListener('mousemove', labelListenersRef.current.move);\n        window.removeEventListener('mouseup', labelListenersRef.current.up);\n        import('../utils/listenerTracker').then(m => {\n          m.unregisterListener('mousemove');\n          m.unregisterListener('mouseup');\n        }).catch(() => {});\n        labelListenersRef.current = null;\n      }\n    };\n    labelListenersRef.current = {\n      move: onMove,\n      up: onUp\n    };\n    window.addEventListener('mousemove', onMove);\n    window.addEventListener('mouseup', onUp);\n    import('../utils/listenerTracker').then(m => {\n      m.registerListener('mousemove');\n      m.registerListener('mouseup');\n    }).catch(() => {});\n  };\n  useEffect(() => {\n    return () => {\n      if (labelListenersRef.current) {\n        window.removeEventListener('mousemove', labelListenersRef.current.move);\n        window.removeEventListener('mouseup', labelListenersRef.current.up);\n        labelListenersRef.current = null;\n      }\n    };\n  }, []);\n\n  // generate values for sequential fill\n  const generateSequential = () => {\n    const total = rows * cols;\n    const seq = [];\n    let value = Number(firstNum);\n    for (let i = 0; i < total; i++) {\n      seq.push(value);\n      value = value + 1;\n    }\n    // arrange according to order\n    const mat = Array.from({\n      length: rows\n    }, () => Array.from({\n      length: cols\n    }, () => null));\n    let idx = 0;\n    if (order === 'column') {\n      for (let c = 0; c < cols; c++) {\n        for (let r = 0; r < rows; r++) {\n          mat[r][c] = seq[idx++];\n        }\n      }\n    } else {\n      for (let r = 0; r < rows; r++) {\n        for (let c = 0; c < cols; c++) {\n          mat[r][c] = seq[idx++];\n        }\n      }\n    }\n    setValues(mat);\n  };\n  useEffect(() => {\n    if (!scrambled) generateSequential();\n  }, [rows, cols, order, firstNum, lastNum, scrambled]);\n\n  // snap bounding rect to the full image/container\n  const snapToImage = () => {\n    if (!containerRef.current) return;\n    const r = containerRef.current.getBoundingClientRect();\n    setRect({\n      x0: 0,\n      y0: 0,\n      x1: r.width,\n      y1: r.height\n    });\n  };\n\n  // check minimum cell size and compute metrics\n  const minCellPx = 18;\n  const rectWidth = rect ? rect.x1 - rect.x0 : 0;\n  const rectHeight = rect ? rect.y1 - rect.y0 : 0;\n  const cellWidth = rectWidth && cols ? rectWidth / cols : 0;\n  const cellHeight = rectHeight && rows ? rectHeight / rows : 0;\n  const cellTooSmall = cellWidth < minCellPx || cellHeight < minCellPx;\n  const updateCell = (r, c, v) => {\n    const next = values.map(row => row.slice());\n    next[r][c] = v === '' ? null : Number(v);\n    setValues(next);\n  };\n  const computeBboxPct = () => {\n    // compute normalized bbox (prefer percent of the image area if available, else container)\n    if (!rect || !containerRef.current) return null;\n    const rectC = containerRef.current.getBoundingClientRect();\n    // if we have an image element, compute bbox relative to the image displayed rect inside the container\n    if (imgRef && imgRef.current) {\n      const imgR = imgRef.current.getBoundingClientRect();\n      const offsetLeft = imgR.left - rectC.left;\n      const offsetTop = imgR.top - rectC.top;\n      const x0p = clamp((rect.x0 - offsetLeft) / imgR.width, 0, 1);\n      const y0p = clamp((rect.y0 - offsetTop) / imgR.height, 0, 1);\n      const x1p = clamp((rect.x1 - offsetLeft) / imgR.width, 0, 1);\n      const y1p = clamp((rect.y1 - offsetTop) / imgR.height, 0, 1);\n      return {\n        x0p,\n        y0p,\n        x1p,\n        y1p,\n        designWidth: Math.round(imgR.width),\n        designHeight: Math.round(imgR.height)\n      };\n    }\n    const x0p = rect.x0 / rectC.width;\n    const y0p = rect.y0 / rectC.height;\n    const x1p = rect.x1 / rectC.width;\n    const y1p = rect.y1 / rectC.height;\n    return {\n      x0p,\n      y0p,\n      x1p,\n      y1p\n    };\n  };\n  const handleSave = () => {\n    if (cellTooSmall) return;\n    // build grid object\n    const bbox = computeBboxPct();\n    const numbering = scrambled ? {\n      mode: 'manual'\n    } : {\n      mode: 'sequential',\n      order,\n      first: Number(firstNum),\n      last: Number(lastNum)\n    };\n    const grid = {\n      bbox,\n      rows: Number(rows),\n      cols: Number(cols),\n      numbering,\n      values\n    };\n    if (overlayType === 'player' || overlayType === 'both') {\n      // save both absolute px offsets (for backward compatibility) and normalized offsets\n      // Prefer measuring overlay size in image-space when available (computeBboxPct supplies designWidth/designHeight)\n      const overlayPxWidth = bbox !== null && bbox !== void 0 && bbox.designWidth ? Math.round((bbox.x1p - bbox.x0p) * bbox.designWidth) : rect ? rect.x1 - rect.x0 : 0;\n      const overlayPxHeight = bbox !== null && bbox !== void 0 && bbox.designHeight ? Math.round((bbox.y1p - bbox.y0p) * bbox.designHeight) : rect ? rect.y1 - rect.y0 : 0;\n      const rowOffsetPct = overlayPxWidth ? Number(rowOffset) / overlayPxWidth : 0;\n      const colOffsetPct = overlayPxHeight ? Number(colOffset) / overlayPxHeight : 0;\n      // compute normalized centers for each row/col from rowPos/colPos so player labels can be placed independently\n      let rowCentersPct = null;\n      let colCentersPct = null;\n      if (rect && rowPos && colPos) {\n        const rectH = rect.y1 - rect.y0;\n        const rectW = rect.x1 - rect.x0;\n        rowCentersPct = Array.from({\n          length: rows\n        }).map((_, i) => {\n          const start = rowPos[i];\n          const end = rowPos[i + 1];\n          const center = (start + end) / 2;\n          return rectH ? center / rectH : 0;\n        });\n        colCentersPct = Array.from({\n          length: cols\n        }).map((_, i) => {\n          const start = colPos[i];\n          const end = colPos[i + 1];\n          const center = (start + end) / 2;\n          return rectW ? center / rectW : 0;\n        });\n      }\n      const showRows = !!showPlayerRows;\n      const showCols = !!showPlayerCols;\n      grid.playerOverlay = {\n        rows: playerRows.slice(0, rows),\n        cols: playerCols.slice(0, cols),\n        rowOffset: Number(rowOffset),\n        colOffset: Number(colOffset),\n        rowOffsetPct,\n        colOffsetPct,\n        rowCentersPct,\n        colCentersPct,\n        showRows,\n        showCols\n      };\n    }\n    grid.overlayType = overlayType;\n    onSave(grid);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0,\n      background: 'rgba(0,0,0,0.4)',\n      zIndex: 9999,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-view grid-designer-modal\",\n      style: {\n        width: '85vw',\n        height: '85vh',\n        maxWidth: 1200,\n        minWidth: 520,\n        minHeight: 360,\n        overflow: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-designer-header\",\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0\n          },\n          children: \"Design Dab Grid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 12,\n              color: '#cbd5e1',\n              marginBottom: 6,\n              textAlign: 'right'\n            },\n            children: \"Drag lower-right corner to resize\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-muted\",\n            onClick: onCancel,\n            style: {\n              marginRight: 8\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-primary\",\n            onClick: handleSave,\n            disabled: !rect || !values,\n            children: \"Save Grid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8,\n          display: 'flex',\n          gap: 12,\n          alignItems: 'stretch',\n          height: 'calc(100% - 60px)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: '1 1 auto',\n            minWidth: 240,\n            maxWidth: '100%',\n            display: 'flex',\n            height: '100%'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid-designer-image-container\",\n            ref: containerRef,\n            onMouseDown: onPointerDown,\n            onMouseMove: onPointerMove,\n            onMouseUp: finishDraw,\n            onMouseLeave: finishDraw,\n            style: {\n              height: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              ref: imgRef,\n              src: imageUrl,\n              alt: \"Design\",\n              style: {\n                display: 'block',\n                maxWidth: '100%',\n                maxHeight: '100%',\n                objectFit: 'contain'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: 8,\n                top: 8,\n                background: 'rgba(255,255,255,0.95)',\n                padding: '6px 8px',\n                borderRadius: 4,\n                fontSize: 12,\n                color: '#111'\n              },\n              children: [\"Click and drag to draw the grid bounding box. Adjust rows/cols on the right, then Preview or Save.\", /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 6\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: snapToImage,\n                  children: \"Snap to image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 44\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this), rect && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: rect.x0,\n                top: rect.y0,\n                width: rect.x1 - rect.x0,\n                height: rect.y1 - rect.y0,\n                border: hoverEdges.left || hoverEdges.right || hoverEdges.top || hoverEdges.bottom ? '3px solid #f59e0b' : '2px dashed #00A',\n                background: hoverEdges.left || hoverEdges.right || hoverEdges.top || hoverEdges.bottom ? 'rgba(245,158,11,0.06)' : 'rgba(0,160,255,0.08)',\n                boxShadow: hoverEdges.left || hoverEdges.right || hoverEdges.top || hoverEdges.bottom ? '0 4px 12px rgba(245,158,11,0.12)' : 'none',\n                overflow: 'hidden'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  position: 'absolute',\n                  left: 6,\n                  top: 6,\n                  background: hoverEdges.left || hoverEdges.right || hoverEdges.top || hoverEdges.bottom ? '#fff' : 'rgba(255,255,255,0.92)',\n                  padding: '4px 6px',\n                  borderRadius: 3,\n                  fontSize: 12,\n                  color: '#000'\n                },\n                children: [rows, \" \\xD7 \", cols, \" \\u2014 \", Math.max(0, Math.floor(cellWidth)), \"\\xD7\", Math.max(0, Math.floor(cellHeight)), \" px\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this), rect && values && rowPos && colPos && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                left: rect.x0,\n                top: rect.y0,\n                width: rect.x1 - rect.x0,\n                height: rect.y1 - rect.y0,\n                pointerEvents: overlayType === 'player' || overlayType === 'both' ? 'auto' : 'none',\n                overflow: 'visible'\n              },\n              children: [Array.from({\n                length: rows\n              }).map((_, r) => {\n                const rowH = Math.max(0, rowPos[r + 1] - rowPos[r]);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    height: rowH + 'px'\n                  },\n                  children: Array.from({\n                    length: cols\n                  }).map((_, c) => {\n                    var _values$r;\n                    const colW = Math.max(0, colPos[c + 1] - colPos[c]);\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"grid-designer-cell\",\n                      style: {\n                        width: colW + 'px',\n                        height: rowH + 'px',\n                        fontSize: 16,\n                        fontWeight: 700,\n                        color: '#012'\n                      },\n                      children: values === null || values === void 0 ? void 0 : (_values$r = values[r]) === null || _values$r === void 0 ? void 0 : _values$r[c]\n                    }, c, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 29\n                    }, this);\n                  })\n                }, r, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 458,\n                  columnNumber: 23\n                }, this);\n              }), rowPos.map((p, i) => {\n                // skip first and last (outer border lines optional)\n                if (i === 0 || i === rowPos.length - 1) return null;\n                const top = p;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  onMouseDown: e => startDrag('row', i, e),\n                  className: \"designer-divider horizontal\",\n                  style: {\n                    position: 'absolute',\n                    left: 0,\n                    top: top - 2,\n                    width: '100%',\n                    height: 4,\n                    background: 'rgba(0,0,0,0.5)',\n                    cursor: 'ns-resize',\n                    pointerEvents: 'auto',\n                    opacity: 0.9\n                  }\n                }, 'r' + i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 23\n                }, this);\n              }), colPos.map((p, i) => {\n                if (i === 0 || i === colPos.length - 1) return null;\n                const left = p;\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  onMouseDown: e => startDrag('col', i, e),\n                  className: \"designer-divider vertical\",\n                  style: {\n                    position: 'absolute',\n                    left: left - 2,\n                    top: 0,\n                    height: '100%',\n                    width: 4,\n                    background: 'rgba(0,0,0,0.5)',\n                    cursor: 'ew-resize',\n                    pointerEvents: 'auto',\n                    opacity: 0.9\n                  }\n                }, 'c' + i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 23\n                }, this);\n              }), (overlayType === 'player' || overlayType === 'both') && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [showPlayerRows && playerRows.slice(0, rows).map((name, r) => {\n                  const centerYraw = (rowPos[r] + rowPos[r + 1]) / 2;\n                  const centerY = Number.isFinite(Number(centerYraw)) ? Number(centerYraw) : 0;\n                  const rowH = Math.max(1, rowPos[r + 1] - rowPos[r]);\n                  const overlayW = rect ? rect.x1 - rect.x0 : 0;\n                  const rowOffsetPx = Number.isFinite(Number(rowOffset)) ? Number(rowOffset) : 110;\n                  const labelH = Math.max(20, Math.min(32, Math.round(rowH * 0.65)));\n                  const labelW = Math.max(60, Math.min(160, safeNumber(Math.round(rowOffsetPx - 8), 60)));\n                  const fontSize = Math.max(10, Math.min(18, Math.round(rowH * 0.45)));\n                  const topPos = safeNumber(centerY - labelH / 2, 0);\n                  const leftPos = -rowOffsetPx;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"player-label row\",\n                    onMouseDown: e => startLabelDrag('row', e),\n                    style: {\n                      position: 'absolute',\n                      left: leftPos,\n                      top: topPos,\n                      width: labelW,\n                      height: labelH,\n                      display: 'flex',\n                      alignItems: 'center',\n                      padding: '4px 6px',\n                      background: 'transparent',\n                      color: '#012',\n                      cursor: 'grab',\n                      borderRadius: 4,\n                      fontSize: fontSize\n                    },\n                    children: name\n                  }, 'prow' + r, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 27\n                  }, this);\n                }), showPlayerCols && playerCols.slice(0, cols).map((name, c) => {\n                  const centerX = (colPos[c] + colPos[c + 1]) / 2;\n                  const colW = Math.max(1, colPos[c + 1] - colPos[c]);\n                  const colOffsetPx = colOffset;\n                  const labelW = Math.max(16, Math.min(40, Math.round(colW * 0.8)));\n                  const labelH = Math.max(60, Math.min(140, Math.round(colOffsetPx - 8)));\n                  const fontSize = Math.max(10, Math.min(16, Math.round(colW * 0.4)));\n                  const leftPos = centerX - labelW / 2;\n                  const topPos = -colOffsetPx - labelH + 8;\n                  return /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"player-label col\",\n                    onMouseDown: e => startLabelDrag('col', e),\n                    style: {\n                      position: 'absolute',\n                      left: leftPos,\n                      top: topPos,\n                      width: labelW,\n                      height: labelH,\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      padding: '4px 6px',\n                      background: 'transparent',\n                      color: '#012',\n                      cursor: 'grab',\n                      borderRadius: 4,\n                      transform: 'rotate(-90deg)',\n                      transformOrigin: 'center bottom',\n                      fontSize: fontSize\n                    },\n                    children: name\n                  }, 'pcol' + c, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 520,\n                    columnNumber: 27\n                  }, this);\n                })]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 340\n          },\n          className: \"grid-designer-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid-designer-controls-panel\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 13,\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Grid Size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                gap: 8,\n                alignItems: 'center',\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 13\n                },\n                children: [\"Rows\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: rows,\n                  min: 1,\n                  max: 50,\n                  onChange: e => setRows(Number(e.target.value)),\n                  style: {\n                    width: 70,\n                    marginLeft: 8\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 536,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  fontSize: 13\n                },\n                children: [\"Columns\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: cols,\n                  min: 1,\n                  max: 100,\n                  onChange: e => setCols(Number(e.target.value)),\n                  style: {\n                    width: 80,\n                    marginLeft: 8\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 539,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 538,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 13,\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Numbering\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  checked: order === 'column',\n                  onChange: () => setOrder('column')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 50\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Down columns\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 134\n                }, this), \" \\u2014 numbers fill top-to-bottom, then left-to-right (default)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"radio\",\n                  checked: order === 'row',\n                  onChange: () => setOrder('row')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 50\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Across rows\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 128\n                }, this), \" \\u2014 numbers fill left-to-right, then top-to-bottom\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 546,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 13,\n                fontWeight: 700,\n                marginBottom: 6\n              },\n              children: \"Mode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: scrambled,\n                  onChange: e => {\n                    const isChecked = e.target.checked;\n                    setScrambled(isChecked);\n                    if (isChecked) {\n                      setValues(Array.from({\n                        length: rows\n                      }, () => Array.from({\n                        length: cols\n                      }, () => null)));\n                    } else {\n                      generateSequential();\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 552,\n                  columnNumber: 19\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Scrambled grid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 22\n                }, this), \" \\u2014 you will fill numbers manually\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 15\n            }, this), !scrambled && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 8\n              },\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                style: {\n                  display: 'block'\n                },\n                children: [\"First number (default start)\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: firstNum,\n                  onChange: e => setFirstNum(Number(e.target.value)),\n                  style: {\n                    width: 100,\n                    marginLeft: 8\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 571,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 570,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 17\n            }, this), scrambled && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 8,\n                maxHeight: 240,\n                overflow: 'auto',\n                border: '1px solid #eee',\n                padding: 8\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 13,\n                  fontWeight: 600,\n                  marginBottom: 6\n                },\n                children: \"Fill numbers manually\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 12,\n                  color: '#333',\n                  marginBottom: 8\n                },\n                children: \"Click each cell in the preview to enter a number, or type into the fields below.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 579,\n                columnNumber: 19\n              }, this), Array.from({\n                length: rows\n              }).map((_, r) => /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  gap: 6,\n                  marginBottom: 6\n                },\n                children: Array.from({\n                  length: cols\n                }).map((_, c) => {\n                  var _values$r$c, _values$r2;\n                  return /*#__PURE__*/_jsxDEV(\"input\", {\n                    value: (_values$r$c = values === null || values === void 0 ? void 0 : (_values$r2 = values[r]) === null || _values$r2 === void 0 ? void 0 : _values$r2[c]) !== null && _values$r$c !== void 0 ? _values$r$c : '',\n                    onChange: e => updateCell(r, c, e.target.value),\n                    style: {\n                      width: 48,\n                      textAlign: 'center'\n                    }\n                  }, c, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, r, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 577,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 12,\n                display: 'flex',\n                gap: 8,\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: generateSequential,\n                style: {\n                  marginRight: 8\n                },\n                children: \"Preview Fill\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setRows(20);\n                  setCols(5);\n                  setOrder('column');\n                  setScrambled(false);\n                  generateSequential();\n                },\n                children: \"Reset Defaults\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginLeft: 8,\n                  color: cellTooSmall ? '#b00' : '#666',\n                  fontSize: 12\n                },\n                children: cellTooSmall ? 'Bounding box too small for selected grid  enlarge box' : `Cell size: ${Math.max(0, Math.floor(cellWidth))}${Math.max(0, Math.floor(cellHeight))} px`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 590,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 12\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 13,\n                  fontWeight: 700,\n                  marginBottom: 6\n                },\n                children: \"Player Overlay\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginBottom: 8,\n                  display: 'flex',\n                  gap: 12,\n                  alignItems: 'flex-start',\n                  justifyContent: 'space-between'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    flex: '1 1 auto'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"overlayType\",\n                      checked: overlayType === 'dab',\n                      onChange: () => setOverlayType('dab')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 604,\n                      columnNumber: 21\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Dab overlay\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 604,\n                      columnNumber: 130\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 603,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"overlayType\",\n                      checked: overlayType === 'player',\n                      onChange: () => setOverlayType('player')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 21\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Player overlay\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 136\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 606,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      display: 'block'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      name: \"overlayType\",\n                      checked: overlayType === 'both',\n                      onChange: () => setOverlayType('both')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 610,\n                      columnNumber: 21\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: \"Both\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 610,\n                      columnNumber: 132\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 609,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 602,\n                  columnNumber: 17\n                }, this), (overlayType === 'player' || overlayType === 'both') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    minWidth: 140,\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: 8\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: 12\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: showPlayerRows,\n                      onChange: e => setShowPlayerRows(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 617,\n                      columnNumber: 50\n                    }, this), \" Show players in rows\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 617,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: 12\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      checked: showPlayerCols,\n                      onChange: e => setShowPlayerCols(e.target.checked)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 618,\n                      columnNumber: 50\n                    }, this), \" Show players in columns\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 618,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 601,\n                columnNumber: 17\n              }, this), (overlayType === 'player' || overlayType === 'both') && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: 8,\n                  maxHeight: 220,\n                  overflow: 'auto',\n                  border: '1px solid #eee',\n                  padding: 8\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    fontWeight: 600,\n                    marginBottom: 6\n                  },\n                  children: \"Player names for rows\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 21\n                }, this), playerRows.map((name, i) => /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: name,\n                  onChange: e => {\n                    const val = e.target.value;\n                    // update local preview\n                    setPlayerRows(prev => {\n                      const next = prev.slice();\n                      next[i] = val;\n                      return next;\n                    });\n                    // update global players immediately so other UIs stay in sync\n                    if (setPlayersRows) setPlayersRows(prev => {\n                      const next = (prev || []).slice();\n                      next[i] = val;\n                      return next;\n                    });\n                  },\n                  style: {\n                    width: '100%',\n                    marginBottom: 6\n                  }\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 628,\n                  columnNumber: 23\n                }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    fontWeight: 600,\n                    marginTop: 8,\n                    marginBottom: 6\n                  },\n                  children: \"Player names for columns\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 21\n                }, this), playerCols.map((name, i) => /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: name,\n                  onChange: e => {\n                    const val = e.target.value;\n                    setPlayerCols(prev => {\n                      const next = prev.slice();\n                      next[i] = val;\n                      return next;\n                    });\n                    if (setPlayersCols) setPlayersCols(prev => {\n                      const next = (prev || []).slice();\n                      next[i] = val;\n                      return next;\n                    });\n                  },\n                  style: {\n                    width: '100%',\n                    marginBottom: 6\n                  }\n                }, i, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 23\n                }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: 8,\n                    marginTop: 6\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      const rdef = Array.from({\n                        length: rows\n                      }, (_, i) => `Player ${i + 1}`);\n                      const cdef = Array.from({\n                        length: cols\n                      }, (_, i) => `Player ${i + 1}`);\n                      setPlayerRows(rdef);\n                      setPlayerCols(cdef);\n                      if (setPlayersRows) setPlayersRows(rdef);\n                      if (setPlayersCols) setPlayersCols(cdef);\n                    },\n                    children: \"Populate defaults\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 647,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      const rempR = Array.from({\n                        length: rows\n                      }, () => '');\n                      const rempC = Array.from({\n                        length: cols\n                      }, () => '');\n                      setPlayerRows(rempR);\n                      setPlayerCols(rempC);\n                      if (setPlayersRows) setPlayersRows(rempR);\n                      if (setPlayersCols) setPlayersCols(rempC);\n                    },\n                    children: \"Clear\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 648,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: 8,\n                    display: 'flex',\n                    gap: 8,\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: 12\n                    },\n                    children: [\"Row label offset (px)\", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      value: rowOffset,\n                      onChange: e => setRowOffset(Number(e.target.value)),\n                      style: {\n                        width: 80,\n                        marginLeft: 8\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 653,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    style: {\n                      fontSize: 12\n                    },\n                    children: [\"Column label offset (px)\", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      value: colOffset,\n                      onChange: e => setColOffset(Number(e.target.value)),\n                      style: {\n                        width: 80,\n                        marginLeft: 8\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 656,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 655,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      fontSize: 12,\n                      color: '#666'\n                    },\n                    children: \"Tip: drag labels in the preview to adjust offsets interactively\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 658,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 424,\n    columnNumber: 5\n  }, this);\n}\n_s(GridDesigner, \"kIad4SsNRsyvpiRAHwYkQITF5ms=\");\n_c = GridDesigner;\nvar _c;\n$RefreshReg$(_c, \"GridDesigner\");","map":{"version":3,"names":["React","useRef","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","clamp","v","a","b","Math","max","min","GridDesigner","imageUrl","initialGrid","initialDefaults","onSave","onCancel","playersRows","setPlayersRows","playersCols","setPlayersCols","_s","_ref","_initialGrid$rows","_ref2","_initialGrid$cols","_initialGrid$numberin","_initialGrid$numberin2","_ref3","_initialGrid$numberin3","_initialGrid$numberin4","_initialGrid$numberin5","_initialGrid$numberin6","_initialGrid$playerOv","_initialGrid$playerOv2","_initialGrid$playerOv3","_initialGrid$playerOv4","_initialDefaults$play","_initialGrid$playerOv5","_initialGrid$playerOv6","_initialDefaults$play2","_initialGrid$playerOv7","_initialGrid$playerOv8","_initialDefaults$show","_initialGrid$playerOv9","_initialGrid$playerOv0","_initialDefaults$show2","imgRef","containerRef","drawing","setDrawing","rect","setRect","bbox","startPt","setStartPt","rows","setRows","cols","setCols","order","setOrder","numbering","scrambled","setScrambled","mode","firstNum","setFirstNum","first","lastNum","setLastNum","last","values","setValues","overlayType","setOverlayType","playerOverlay","playerRows","setPlayerRows","Array","from","length","_","i","playerCols","setPlayerCols","rowOffset","setRowOffset","playerRowOffset","colOffset","setColOffset","playerColOffset","showPlayerRows","setShowPlayerRows","showRows","showPlayerCols","setShowPlayerCols","showCols","rowPos","setRowPos","colPos","setColPos","dragRef","addedListenersRef","hoverEdges","setHoverEdges","left","right","top","bottom","h","y1","y0","w","x1","x0","rp","round","cp","prev","next","slice","push","cornerTol","onPointerDown","e","current","rectC","getBoundingClientRect","x","clientX","y","clientY","rx0","ry0","rx1","ry1","nearLeft","abs","nearRight","nearTop","nearBottom","inside","type","edges","startClientX","startClientY","startRect","move","onPointerMove","up","endDrag","window","addEventListener","then","m","registerListener","catch","anchorX","anchorY","safeNumber","d","Number","isFinite","style","cursor","dy","startClient","idx","newVal","startPos","height","minCellPx","dx","width","dr","s","nx0","ny0","nx1","ny1","xClamped","yClamped","finishDraw","startDrag","stopPropagation","preventDefault","removeEventListener","unregisterListener","labelDragRef","labelListenersRef","startLabelDrag","start","startOffset","onMove","ev","delta","onUp","generateSequential","total","seq","value","mat","c","r","snapToImage","rectWidth","rectHeight","cellWidth","cellHeight","cellTooSmall","updateCell","map","row","computeBboxPct","imgR","offsetLeft","offsetTop","x0p","y0p","x1p","y1p","designWidth","designHeight","handleSave","grid","overlayPxWidth","overlayPxHeight","rowOffsetPct","colOffsetPct","rowCentersPct","colCentersPct","rectH","rectW","end","center","position","background","zIndex","display","alignItems","justifyContent","children","className","maxWidth","minWidth","minHeight","overflow","margin","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","color","marginBottom","textAlign","onClick","marginRight","disabled","marginTop","gap","flex","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","src","alt","maxHeight","objectFit","padding","borderRadius","border","boxShadow","floor","pointerEvents","rowH","_values$r","colW","fontWeight","p","opacity","name","centerYraw","centerY","overlayW","rowOffsetPx","labelH","labelW","topPos","leftPos","centerX","colOffsetPx","transform","transformOrigin","onChange","target","marginLeft","checked","isChecked","_values$r$c","_values$r2","flexDirection","val","rdef","cdef","rempR","rempC","_c","$RefreshReg$"],"sources":["C:/Users/Rande/bingocaller/src/components/GridDesigner.js"],"sourcesContent":["/*\r\n  src/components/GridDesigner.js\r\n  Minimal grid designer overlay: draw rectangle, set rows/cols, choose ordering\r\n  and either auto-fill sequential numbers (column-major default) or manual fill.\r\n*/\r\nimport React, { useRef, useState, useEffect } from 'react'\r\n\r\nfunction clamp(v, a, b) { return Math.max(a, Math.min(b, v)) }\r\n\r\nexport default function GridDesigner({ imageUrl, initialGrid, initialDefaults, onSave, onCancel, playersRows, setPlayersRows, playersCols, setPlayersCols }){\r\n  const imgRef = useRef(null)\r\n  const containerRef = useRef(null)\r\n  const [drawing, setDrawing] = useState(false)\r\n  const [rect, setRect] = useState(initialGrid?.bbox ? {...initialGrid.bbox} : null)\r\n  const [startPt, setStartPt] = useState(null)\r\n  const [rows, setRows] = useState(initialGrid?.rows ?? initialDefaults?.rows ?? 5)\r\n  const [cols, setCols] = useState(initialGrid?.cols ?? initialDefaults?.cols ?? 20)\r\n  const [order, setOrder] = useState((initialGrid?.numbering?.order) || initialDefaults?.order || 'column')\r\n  const [scrambled, setScrambled] = useState(initialGrid?.numbering?.mode === 'manual' || initialDefaults?.scrambled || false)\r\n  const [firstNum, setFirstNum] = useState(initialGrid?.numbering?.first ?? initialDefaults?.firstNum ?? 1)\r\n  const [lastNum, setLastNum] = useState(initialGrid?.numbering?.last ?? (rows*cols))\r\n  const [values, setValues] = useState(initialGrid?.values || null)\r\n  // overlay/player mode\r\n  const [overlayType, setOverlayType] = useState(initialGrid?.playerOverlay ? (initialDefaults?.overlayType || 'both') : (initialDefaults?.overlayType || 'dab'))\r\n  const [playerRows, setPlayerRows] = useState(initialGrid?.playerOverlay?.rows || playersRows || Array.from({length:rows},(_,i)=>`Player ${i+1}`))\r\n  const [playerCols, setPlayerCols] = useState(initialGrid?.playerOverlay?.cols || playersCols || Array.from({length:cols},(_,i)=>`Player ${i+1}`))\r\n  const [rowOffset, setRowOffset] = useState(initialGrid?.playerOverlay?.rowOffset ?? (initialDefaults?.playerRowOffset ?? 110))\r\n  const [colOffset, setColOffset] = useState(initialGrid?.playerOverlay?.colOffset ?? (initialDefaults?.playerColOffset ?? 36))\r\n  const [showPlayerRows, setShowPlayerRows] = useState(initialGrid?.playerOverlay?.showRows ?? (initialDefaults?.showPlayerRows ?? true))\r\n  const [showPlayerCols, setShowPlayerCols] = useState(initialGrid?.playerOverlay?.showCols ?? (initialDefaults?.showPlayerCols ?? false))\r\n\r\n\r\n  // divider positions (px offsets inside rect)\r\n  const [rowPos, setRowPos] = useState(null) // length rows+1\r\n  const [colPos, setColPos] = useState(null) // length cols+1\r\n  const dragRef = useRef(null) // {type:'row'|'col'|'resize'|'move', idx, startClient, startPos}\r\n  const addedListenersRef = useRef(null) // store actual added listener references so they can be removed reliably\r\n  const [hoverEdges, setHoverEdges] = useState({ left:false, right:false, top:false, bottom:false })\r\n\r\n  // initialize row/col positions when rect or rows/cols change\r\n  useEffect(() => {\r\n    if (!rect) return\r\n    const h = rect.y1 - rect.y0\r\n    const w = rect.x1 - rect.x0\r\n    const rp = Array.from({length: rows+1}, (_,i) => Math.round(i * h / rows))\r\n    const cp = Array.from({length: cols+1}, (_,i) => Math.round(i * w / cols))\r\n    setRowPos(rp)\r\n    setColPos(cp)\r\n    // ensure player arrays match sizes locally\r\n    setPlayerRows(prev => {\r\n      const next = (prev || []).slice(0, rows)\r\n      while (next.length < rows) next.push(`Player ${next.length+1}`)\r\n      return next\r\n    })\r\n    setPlayerCols(prev => {\r\n      const next = (prev || []).slice(0, cols)\r\n      while (next.length < cols) next.push(`Player ${next.length+1}`)\r\n      return next\r\n    })\r\n    // sync local names from global lists if provided (keeps designer up-to-date when PlayerList changes)\r\n    if (playersRows) {\r\n      const next = (playersRows || []).slice(0, rows)\r\n      while (next.length < rows) next.push(`Player ${next.length+1}`)\r\n      setPlayerRows(next)\r\n    }\r\n    if (playersCols) {\r\n      const next = (playersCols || []).slice(0, cols)\r\n      while (next.length < cols) next.push(`Player ${next.length+1}`)\r\n      setPlayerCols(next)\r\n    }\r\n    // also sync global player lists if setters were provided\r\n    if (setPlayersRows) setPlayersRows(prev => {\r\n      const next = (prev || []).slice(0, rows)\r\n      while (next.length < rows) next.push(`Player ${next.length+1}`)\r\n      return next\r\n    })\r\n    if (setPlayersCols) setPlayersCols(prev => {\r\n      const next = (prev || []).slice(0, cols)\r\n      while (next.length < cols) next.push(`Player ${next.length+1}`)\r\n      return next\r\n    })\r\n  }, [rect, rows, cols])\r\n\r\n  useEffect(()=>{ setLastNum(rows*cols) }, [rows, cols])\r\n\r\n  // keep local player arrays in sync when global player lists change\r\n  useEffect(() => {\r\n    if (!playersRows) return\r\n    const next = (playersRows || []).slice(0, rows)\r\n    while (next.length < rows) next.push(`Player ${next.length+1}`)\r\n    setPlayerRows(next)\r\n  }, [playersRows, rows])\r\n\r\n  useEffect(() => {\r\n    if (!playersCols) return\r\n    const next = (playersCols || []).slice(0, cols)\r\n    while (next.length < cols) next.push(`Player ${next.length+1}`)\r\n    setPlayerCols(next)\r\n  }, [playersCols, cols])\r\n\r\n  // Mouse/touch handlers to draw bbox relative to image client rect\r\n  const cornerTol = 14\r\n  const onPointerDown = (e) => {\r\n    if (!containerRef.current) return\r\n    const rectC = containerRef.current.getBoundingClientRect()\r\n    const x = e.clientX - rectC.left\r\n    const y = e.clientY - rectC.top\r\n\r\n    // If rect exists, check for edge/corner proximity for resize/move\r\n    if (rect) {\r\n      const rx0 = rect.x0, ry0 = rect.y0, rx1 = rect.x1, ry1 = rect.y1\r\n      const nearLeft = Math.abs(x - rx0) <= cornerTol\r\n      const nearRight = Math.abs(x - rx1) <= cornerTol\r\n      const nearTop = Math.abs(y - ry0) <= cornerTol\r\n      const nearBottom = Math.abs(y - ry1) <= cornerTol\r\n      const inside = x >= rx0 && x <= rx1 && y >= ry0 && y <= ry1\r\n      if (nearLeft || nearRight || nearTop || nearBottom) {\r\n        // start resizing from the corner/edge\r\n        dragRef.current = { type: 'resize', edges: { left: nearLeft, right: nearRight, top: nearTop, bottom: nearBottom }, startClientX: e.clientX, startClientY: e.clientY, startRect: { ...rect } }\r\n        // store exact references so we can remove the same functions later\r\n        addedListenersRef.current = { move: onPointerMove, up: endDrag }\r\n        window.addEventListener('mousemove', onPointerMove)\r\n        window.addEventListener('mouseup', endDrag)\r\n        // dev-only listener tracking\r\n        import('../utils/listenerTracker').then(m => { m.registerListener('mousemove'); m.registerListener('mouseup') }).catch(()=>{})\r\n        return\r\n      }\r\n      if (inside) {\r\n        // start moving the whole rect\r\n        dragRef.current = { type: 'move', startClientX: e.clientX, startClientY: e.clientY, startRect: { ...rect } }\r\n        addedListenersRef.current = { move: onPointerMove, up: endDrag }\r\n        window.addEventListener('mousemove', onPointerMove)\r\n        window.addEventListener('mouseup', endDrag)\r\n        // dev-only listener tracking\r\n        import('../utils/listenerTracker').then(m => { m.registerListener('mousemove'); m.registerListener('mouseup') }).catch(()=>{})\r\n        return\r\n      }\r\n\r\n      // Clicked outside rect: allow starting a new draw anchored at the opposite corner\r\n      const anchorX = x < rx0 ? rx1 : (x > rx1 ? rx0 : (Math.abs(x - rx0) > Math.abs(x - rx1) ? rx0 : rx1))\r\n      const anchorY = y < ry0 ? ry1 : (y > ry1 ? ry0 : (Math.abs(y - ry0) > Math.abs(y - ry1) ? ry0 : ry1))\r\n      setStartPt({ x: anchorX, y: anchorY })\r\n      setDrawing(true)\r\n      return\r\n    }\r\n\r\n    // otherwise start a new draw\r\n    setStartPt({x,y})\r\n    setDrawing(true)\r\n  }\r\n  const safeNumber = (v, d = 0) => Number.isFinite(Number(v)) ? Number(v) : d\r\n  const onPointerMove = (e) => {\r\n    // update hover state even when not dragging\r\n    if (!containerRef.current) return\r\n    const rectC = containerRef.current.getBoundingClientRect()\r\n    const x = e.clientX - rectC.left\r\n    const y = e.clientY - rectC.top\r\n    if (!dragRef.current && rect && !drawing) {\r\n      const rx0 = rect.x0, ry0 = rect.y0, rx1 = rect.x1, ry1 = rect.y1\r\n      const nearLeft = Math.abs(x - rx0) <= cornerTol\r\n      const nearRight = Math.abs(x - rx1) <= cornerTol\r\n      const nearTop = Math.abs(y - ry0) <= cornerTol\r\n      const nearBottom = Math.abs(y - ry1) <= cornerTol\r\n      setHoverEdges({ left: nearLeft, right: nearRight, top: nearTop, bottom: nearBottom })\r\n      // set cursor\r\n      if (nearLeft || nearRight) containerRef.current.style.cursor = 'ew-resize'\r\n      else if (nearTop || nearBottom) containerRef.current.style.cursor = 'ns-resize'\r\n      else containerRef.current.style.cursor = ''\r\n    }\r\n\r\n    if (dragRef.current) {\r\n      if (dragRef.current.type === 'row') {\r\n        const dy = e.clientY - dragRef.current.startClient\r\n        setRowPos(prev => {\r\n          const next = prev.slice()\r\n          const idx = dragRef.current.idx\r\n          const newVal = clamp(dragRef.current.startPos + dy, 0, rectC.height)\r\n          // enforce min cell px\r\n          const min = minCellPx\r\n          if (newVal - next[idx-1] < min) return prev\r\n          if (next[idx+1] - newVal < min) return prev\r\n          next[idx] = Math.round(newVal)\r\n          return next\r\n        })\r\n      } else if (dragRef.current.type === 'col') {\r\n        const dx = e.clientX - dragRef.current.startClient\r\n        setColPos(prev => {\r\n          const next = prev.slice()\r\n          const idx = dragRef.current.idx\r\n          const newVal = clamp(dragRef.current.startPos + dx, 0, rectC.width)\r\n          const min = minCellPx\r\n          if (newVal - next[idx-1] < min) return prev\r\n          if (next[idx+1] - newVal < min) return prev\r\n          next[idx] = Math.round(newVal)\r\n          return next\r\n        })\r\n      } else if (dragRef.current.type === 'resize') {\r\n        const dr = dragRef.current\r\n        const dx = e.clientX - dr.startClientX\r\n        const dy = e.clientY - dr.startClientY\r\n        const s = dr.startRect\r\n        let nx0 = s.x0, ny0 = s.y0, nx1 = s.x1, ny1 = s.y1\r\n        if (dr.edges.left) nx0 = clamp(s.x0 + dx, 0, s.x1 - minCellPx * cols)\r\n        if (dr.edges.right) nx1 = clamp(s.x1 + dx, nx0 + minCellPx * cols, rectC.width)\r\n        if (dr.edges.top) ny0 = clamp(s.y0 + dy, 0, s.y1 - minCellPx * rows)\r\n        if (dr.edges.bottom) ny1 = clamp(s.y1 + dy, ny0 + minCellPx * rows, rectC.height)\r\n        setRect({ x0: nx0, y0: ny0, x1: nx1, y1: ny1 })\r\n      } else if (dragRef.current.type === 'move') {\r\n        const dr = dragRef.current\r\n        const dx = e.clientX - dr.startClientX\r\n        const dy = e.clientY - dr.startClientY\r\n        const s = dr.startRect\r\n        const width = s.x1 - s.x0\r\n        const height = s.y1 - s.y0\r\n        const nx0 = clamp(s.x0 + dx, 0, rectC.width - width)\r\n        const ny0 = clamp(s.y0 + dy, 0, rectC.height - height)\r\n        setRect({ x0: nx0, y0: ny0, x1: nx0 + width, y1: ny0 + height })\r\n      }\r\n      return\r\n    }\r\n    if (!drawing || !startPt || !containerRef.current) return\r\n    const xClamped = clamp(x, 0, rectC.width)\r\n    const yClamped = clamp(y, 0, rectC.height)\r\n    const x0 = Math.min(startPt.x, xClamped)\r\n    const y0 = Math.min(startPt.y, yClamped)\r\n    const x1 = Math.max(startPt.x, xClamped)\r\n    const y1 = Math.max(startPt.y, yClamped)\r\n    setRect({ x0, y0, x1, y1 })\r\n  }\r\n  const finishDraw = () => { setDrawing(false); setStartPt(null); setHoverEdges({ left:false, right:false, top:false, bottom:false }); if (containerRef.current) containerRef.current.style.cursor = '' }\r\n\r\n  // start dragging a divider\r\n  const startDrag = (type, idx, e) => {\r\n    if (!containerRef.current) return\r\n    e.stopPropagation(); e.preventDefault()\r\n    const rectC = containerRef.current.getBoundingClientRect()\r\n    if (type === 'row') {\r\n      dragRef.current = { type:'row', idx, startClient: e.clientY, startPos: rowPos[idx] }\r\n    } else {\r\n      dragRef.current = { type:'col', idx, startClient: e.clientX, startPos: colPos[idx] }\r\n    }\r\n    // attach global listeners and remember the exact references so they can be removed\r\n    addedListenersRef.current = { move: onPointerMove, up: endDrag }\r\n    window.addEventListener('mousemove', onPointerMove)\r\n    window.addEventListener('mouseup', endDrag)\r\n    import('../utils/listenerTracker').then(m => { m.registerListener('mousemove'); m.registerListener('mouseup') }).catch(()=>{})\r\n  }\r\n  const endDrag = () => {\r\n    dragRef.current = null\r\n    if (addedListenersRef.current) {\r\n      window.removeEventListener('mousemove', addedListenersRef.current.move)\r\n      window.removeEventListener('mouseup', addedListenersRef.current.up)\r\n      // dev-only tracking cleanup\r\n      import('../utils/listenerTracker').then(m => { m.unregisterListener('mousemove'); m.unregisterListener('mouseup') }).catch(()=>{})\r\n      addedListenersRef.current = null\r\n    } else {\r\n      // fallback: try removing the handlers directly\r\n      window.removeEventListener('mousemove', onPointerMove)\r\n      window.removeEventListener('mouseup', endDrag)\r\n      import('../utils/listenerTracker').then(m => { m.unregisterListener('mousemove'); m.unregisterListener('mouseup') }).catch(()=>{})\r\n    }\r\n  }\r\n\r\n  // Ensure any leftover global listeners are cleaned up on unmount (safety net)\r\n  useEffect(() => {\r\n    return () => {\r\n      if (addedListenersRef.current) {\r\n        window.removeEventListener('mousemove', addedListenersRef.current.move)\r\n        window.removeEventListener('mouseup', addedListenersRef.current.up)\r\n        addedListenersRef.current = null\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Dragging player label offsets (row labels drag horizontally to adjust rowOffset; column labels drag vertically to adjust colOffset)\r\n  const labelDragRef = useRef(null)\r\n  const labelListenersRef = useRef(null)\r\n  const startLabelDrag = (type, e) => {\r\n    e.stopPropagation(); e.preventDefault()\r\n    if (!containerRef.current || !rect) return\r\n    const start = type === 'row' ? e.clientX : e.clientY\r\n    labelDragRef.current = { type, start, startOffset: type === 'row' ? rowOffset : colOffset }\r\n    const onMove = (ev) => {\r\n      if (!labelDragRef.current) return\r\n      const delta = (labelDragRef.current.type === 'row') ? (ev.clientX - labelDragRef.current.start) : (ev.clientY - labelDragRef.current.start)\r\n      if (labelDragRef.current.type === 'row') setRowOffset(Math.max(4, Math.round(labelDragRef.current.startOffset - delta)))\r\n      else setColOffset(Math.max(4, Math.round(labelDragRef.current.startOffset - delta)))\r\n    }\r\n    const onUp = () => {\r\n      labelDragRef.current = null\r\n      if (labelListenersRef.current) {\r\n        window.removeEventListener('mousemove', labelListenersRef.current.move)\r\n        window.removeEventListener('mouseup', labelListenersRef.current.up)\r\n        import('../utils/listenerTracker').then(m => { m.unregisterListener('mousemove'); m.unregisterListener('mouseup') }).catch(()=>{})\r\n        labelListenersRef.current = null\r\n      }\r\n    }\r\n    labelListenersRef.current = { move: onMove, up: onUp }\r\n    window.addEventListener('mousemove', onMove)\r\n    window.addEventListener('mouseup', onUp)\r\n    import('../utils/listenerTracker').then(m => { m.registerListener('mousemove'); m.registerListener('mouseup') }).catch(()=>{})\r\n  }\r\n  useEffect(() => {\r\n    return () => {\r\n      if (labelListenersRef.current) {\r\n        window.removeEventListener('mousemove', labelListenersRef.current.move)\r\n        window.removeEventListener('mouseup', labelListenersRef.current.up)\r\n        labelListenersRef.current = null\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // generate values for sequential fill\r\n  const generateSequential = () => {\r\n    const total = rows*cols\r\n    const seq = []\r\n    let value = Number(firstNum)\r\n    for (let i=0;i<total;i++) { seq.push(value); value = value + 1 }\r\n    // arrange according to order\r\n    const mat = Array.from({length:rows}, ()=>Array.from({length:cols}, ()=>null))\r\n    let idx = 0\r\n    if (order === 'column') {\r\n      for (let c=0;c<cols;c++){\r\n        for (let r=0;r<rows;r++){\r\n          mat[r][c] = seq[idx++]\r\n        }\r\n      }\r\n    } else {\r\n      for (let r=0;r<rows;r++){\r\n        for (let c=0;c<cols;c++){\r\n          mat[r][c] = seq[idx++]\r\n        }\r\n      }\r\n    }\r\n    setValues(mat)\r\n  }\r\n\r\n  useEffect(()=>{ if (!scrambled) generateSequential() }, [rows, cols, order, firstNum, lastNum, scrambled])\r\n\r\n  // snap bounding rect to the full image/container\r\n  const snapToImage = () => {\r\n    if (!containerRef.current) return\r\n    const r = containerRef.current.getBoundingClientRect()\r\n    setRect({ x0: 0, y0: 0, x1: r.width, y1: r.height })\r\n  }\r\n\r\n  // check minimum cell size and compute metrics\r\n  const minCellPx = 18\r\n  const rectWidth = rect ? (rect.x1 - rect.x0) : 0\r\n  const rectHeight = rect ? (rect.y1 - rect.y0) : 0\r\n  const cellWidth = rectWidth && cols ? rectWidth / cols : 0\r\n  const cellHeight = rectHeight && rows ? rectHeight / rows : 0\r\n  const cellTooSmall = (cellWidth < minCellPx) || (cellHeight < minCellPx)\r\n\r\n  const updateCell = (r,c,v) => {\r\n    const next = values.map(row=>row.slice())\r\n    next[r][c] = v === '' ? null : Number(v)\r\n    setValues(next)\r\n  }\r\n\r\n  const computeBboxPct = () => {\r\n    // compute normalized bbox (prefer percent of the image area if available, else container)\r\n    if (!rect || !containerRef.current) return null\r\n    const rectC = containerRef.current.getBoundingClientRect()\r\n    // if we have an image element, compute bbox relative to the image displayed rect inside the container\r\n    if (imgRef && imgRef.current) {\r\n      const imgR = imgRef.current.getBoundingClientRect()\r\n      const offsetLeft = imgR.left - rectC.left\r\n      const offsetTop = imgR.top - rectC.top\r\n      const x0p = clamp((rect.x0 - offsetLeft) / imgR.width, 0, 1)\r\n      const y0p = clamp((rect.y0 - offsetTop) / imgR.height, 0, 1)\r\n      const x1p = clamp((rect.x1 - offsetLeft) / imgR.width, 0, 1)\r\n      const y1p = clamp((rect.y1 - offsetTop) / imgR.height, 0, 1)\r\n      return { x0p, y0p, x1p, y1p, designWidth: Math.round(imgR.width), designHeight: Math.round(imgR.height) }\r\n    }\r\n    const x0p = rect.x0 / rectC.width\r\n    const y0p = rect.y0 / rectC.height\r\n    const x1p = rect.x1 / rectC.width\r\n    const y1p = rect.y1 / rectC.height\r\n    return { x0p, y0p, x1p, y1p }\r\n  }\r\n\r\n  const handleSave = () => {\r\n    if (cellTooSmall) return\r\n    // build grid object\r\n    const bbox = computeBboxPct()\r\n    const numbering = scrambled ? { mode: 'manual' } : { mode: 'sequential', order, first: Number(firstNum), last: Number(lastNum) }\r\n    const grid = { bbox, rows: Number(rows), cols: Number(cols), numbering, values }\r\n    if (overlayType === 'player' || overlayType === 'both') {\r\n      // save both absolute px offsets (for backward compatibility) and normalized offsets\r\n      // Prefer measuring overlay size in image-space when available (computeBboxPct supplies designWidth/designHeight)\r\n      const overlayPxWidth = bbox?.designWidth ? Math.round((bbox.x1p - bbox.x0p) * bbox.designWidth) : (rect ? (rect.x1 - rect.x0) : 0)\r\n      const overlayPxHeight = bbox?.designHeight ? Math.round((bbox.y1p - bbox.y0p) * bbox.designHeight) : (rect ? (rect.y1 - rect.y0) : 0)\r\n      const rowOffsetPct = overlayPxWidth ? Number(rowOffset) / overlayPxWidth : 0\r\n      const colOffsetPct = overlayPxHeight ? Number(colOffset) / overlayPxHeight : 0\r\n      // compute normalized centers for each row/col from rowPos/colPos so player labels can be placed independently\r\n      let rowCentersPct = null\r\n      let colCentersPct = null\r\n      if (rect && rowPos && colPos) {\r\n        const rectH = rect.y1 - rect.y0\r\n        const rectW = rect.x1 - rect.x0\r\n        rowCentersPct = Array.from({length: rows}).map((_, i) => {\r\n          const start = rowPos[i]\r\n          const end = rowPos[i+1]\r\n          const center = (start + end) / 2\r\n          return rectH ? (center / rectH) : 0\r\n        })\r\n        colCentersPct = Array.from({length: cols}).map((_, i) => {\r\n          const start = colPos[i]\r\n          const end = colPos[i+1]\r\n          const center = (start + end) / 2\r\n          return rectW ? (center / rectW) : 0\r\n        })\r\n      }\r\n      const showRows = !!showPlayerRows\r\n      const showCols = !!showPlayerCols\r\n      grid.playerOverlay = { rows: playerRows.slice(0, rows), cols: playerCols.slice(0, cols), rowOffset: Number(rowOffset), colOffset: Number(colOffset), rowOffsetPct, colOffsetPct, rowCentersPct, colCentersPct, showRows, showCols }\r\n    }\r\n    grid.overlayType = overlayType\r\n    onSave(grid)\r\n  }\r\n\r\n  return (\r\n    <div style={{position:'fixed',left:0,top:0,right:0,bottom:0,background:'rgba(0,0,0,0.4)',zIndex:9999,display:'flex',alignItems:'center',justifyContent:'center'}}>\r\n      <div className=\"card-view grid-designer-modal\" style={{width:'85vw',height:'85vh',maxWidth:1200,minWidth:520,minHeight:360,overflow:'auto'}}>\r\n        <div className=\"grid-designer-header\" style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>\r\n          <h3 style={{margin:0}}>Design Dab Grid</h3>\r\n          <div>\r\n            <div style={{fontSize:12,color:'#cbd5e1',marginBottom:6,textAlign:'right'}}>Drag lower-right corner to resize</div>\r\n            <button className=\"btn-muted\" onClick={onCancel} style={{marginRight:8}}>Cancel</button>\r\n            <button className=\"btn-primary\" onClick={handleSave} disabled={!rect || !values}>Save Grid</button>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{marginTop:8,display:'flex',gap:12,alignItems:'stretch',height:'calc(100% - 60px)'}}>\r\n          <div style={{flex:'1 1 auto',minWidth:240,maxWidth:'100%',display:'flex',height:'100%'}}>\r\n            <div className=\"grid-designer-image-container\" ref={containerRef} onMouseDown={onPointerDown} onMouseMove={onPointerMove} onMouseUp={finishDraw} onMouseLeave={finishDraw} style={{height:'100%'}}>\r\n              <img ref={imgRef} src={imageUrl} alt=\"Design\" style={{display:'block',maxWidth:'100%',maxHeight:'100%',objectFit:'contain'}} />\r\n              {/* instructions for drawing */}\r\n              <div style={{position:'absolute',left:8,top:8,background:'rgba(255,255,255,0.95)',padding:'6px 8px',borderRadius:4,fontSize:12,color:'#111'}}>\r\n                Click and drag to draw the grid bounding box. Adjust rows/cols on the right, then Preview or Save.\r\n                <div style={{marginTop:6}}><button onClick={snapToImage}>Snap to image</button></div>\r\n              </div>\r\n\r\n              {rect && (\r\n                <div style={{position:'absolute',left:rect.x0,top:rect.y0,width:rect.x1-rect.x0,height:rect.y1-rect.y0,border: hoverEdges.left||hoverEdges.right||hoverEdges.top||hoverEdges.bottom ? '3px solid #f59e0b' : '2px dashed #00A',background: hoverEdges.left||hoverEdges.right||hoverEdges.top||hoverEdges.bottom ? 'rgba(245,158,11,0.06)' : 'rgba(0,160,255,0.08)',boxShadow: hoverEdges.left||hoverEdges.right||hoverEdges.top||hoverEdges.bottom ? '0 4px 12px rgba(245,158,11,0.12)' : 'none',overflow:'hidden'}}>\r\n                  {/* live label showing rows x cols and cell px size */}\r\n                  <div style={{position:'absolute',left:6,top:6,background: hoverEdges.left||hoverEdges.right||hoverEdges.top||hoverEdges.bottom ? '#fff' : 'rgba(255,255,255,0.92)',padding:'4px 6px',borderRadius:3,fontSize:12,color:'#000'}}>{rows}  {cols}  {Math.max(0,Math.floor(cellWidth))}{Math.max(0,Math.floor(cellHeight))} px</div>\r\n                </div>\r\n              )}\r\n\r\n              {/* grid preview inside rect */}\r\n              {rect && values && rowPos && colPos && (\r\n                <div style={{position:'absolute',left:rect.x0,top:rect.y0,width:rect.x1-rect.x0,height:rect.y1-rect.y0,pointerEvents:(overlayType === 'player' || overlayType === 'both') ? 'auto' : 'none',overflow:'visible'}}>\r\n                  {Array.from({length:rows}).map((_,r)=> {\r\n                    const rowH = Math.max(0, rowPos[r+1] - rowPos[r])\r\n                    return (\r\n                      <div key={r} style={{display:'flex',height:rowH + 'px'}}>\r\n                        {Array.from({length:cols}).map((_,c)=> {\r\n                          const colW = Math.max(0, colPos[c+1] - colPos[c])\r\n                          return (\r\n                            <div key={c} className=\"grid-designer-cell\" style={{width: colW + 'px', height: rowH + 'px', fontSize:16, fontWeight:700, color:'#012'}}>\r\n                              {values?.[r]?.[c]}\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      </div>\r\n                    )\r\n                  })}\r\n\r\n                  {/* render draggable horizontal dividers */}\r\n                  {rowPos.map((p, i) => {\r\n                    // skip first and last (outer border lines optional)\r\n                    if (i === 0 || i === rowPos.length-1) return null\r\n                    const top = p\r\n                    return (\r\n                      <div key={'r'+i} onMouseDown={(e)=>startDrag('row', i, e)} className=\"designer-divider horizontal\" style={{position:'absolute',left:0,top:top-2,width:'100%',height:4,background:'rgba(0,0,0,0.5)',cursor:'ns-resize',pointerEvents:'auto',opacity:0.9}} />\r\n                    )\r\n                  })}\r\n\r\n                  {/* render draggable vertical dividers */}\r\n                  {colPos.map((p, i) => {\r\n                    if (i === 0 || i === colPos.length-1) return null\r\n                    const left = p\r\n                    return (\r\n                      <div key={'c'+i} onMouseDown={(e)=>startDrag('col', i, e)} className=\"designer-divider vertical\" style={{position:'absolute',left:left-2,top:0,height:'100%',width:4,background:'rgba(0,0,0,0.5)',cursor:'ew-resize',pointerEvents:'auto',opacity:0.9}} />\r\n                    )\r\n                  })}\r\n                  {/* preview player labels when enabled */}\r\n                  {(overlayType === 'player' || overlayType === 'both') && (\r\n                    <>\r\n                      {/* row labels (to left) - draggable horizontally to adjust rowOffset */}\r\n                      {showPlayerRows && playerRows.slice(0, rows).map((name, r) => {\r\n                        const centerYraw = (rowPos[r] + rowPos[r+1]) / 2\r\n                        const centerY = Number.isFinite(Number(centerYraw)) ? Number(centerYraw) : 0\r\n                        const rowH = Math.max(1, rowPos[r+1] - rowPos[r])\r\n                        const overlayW = rect ? (rect.x1 - rect.x0) : 0\r\n                        const rowOffsetPx = Number.isFinite(Number(rowOffset)) ? Number(rowOffset) : 110\r\n                        const labelH = Math.max(20, Math.min(32, Math.round(rowH * 0.65)))\r\n                        const labelW = Math.max(60, Math.min(160, safeNumber(Math.round(rowOffsetPx - 8), 60)))\r\n                        const fontSize = Math.max(10, Math.min(18, Math.round(rowH * 0.45)))\r\n                        const topPos = safeNumber(centerY - labelH / 2, 0)\r\n                        const leftPos = -rowOffsetPx\r\n                        return (\r\n                          <div key={'prow'+r} className=\"player-label row\" onMouseDown={(e)=>startLabelDrag('row', e)} style={{position:'absolute',left:leftPos,top:topPos,width:labelW,height:labelH,display:'flex',alignItems:'center',padding:'4px 6px',background:'transparent',color:'#012',cursor:'grab',borderRadius:4,fontSize:fontSize}}>{name}</div>\r\n                        )\r\n                      })}\r\n\r\n                      {/* column labels (above) - draggable vertically to adjust colOffset */}\r\n                      {showPlayerCols && playerCols.slice(0, cols).map((name, c) => {\r\n                        const centerX = (colPos[c] + colPos[c+1]) / 2\r\n                        const colW = Math.max(1, colPos[c+1] - colPos[c])\r\n                        const colOffsetPx = colOffset\r\n                        const labelW = Math.max(16, Math.min(40, Math.round(colW * 0.8)))\r\n                        const labelH = Math.max(60, Math.min(140, Math.round(colOffsetPx - 8)))\r\n                        const fontSize = Math.max(10, Math.min(16, Math.round(colW * 0.4)))\r\n                        const leftPos = centerX - labelW / 2\r\n                        const topPos = -colOffsetPx - labelH + 8\r\n                        return (\r\n                          <div key={'pcol'+c} className=\"player-label col\" onMouseDown={(e)=>startLabelDrag('col', e)} style={{position:'absolute',left:leftPos,top:topPos,width:labelW,height:labelH,display:'flex',alignItems:'center',justifyContent:'center',padding:'4px 6px',background:'transparent',color:'#012',cursor:'grab',borderRadius:4,transform:'rotate(-90deg)',transformOrigin:'center bottom',fontSize:fontSize}}>{name}</div>\r\n                        )\r\n                      })}\r\n                    </>\r\n                  )}\r\n\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{width:340}} className=\"grid-designer-controls\">\r\n            <div className=\"grid-designer-controls-panel\">\r\n              <div style={{fontSize:13,fontWeight:700,marginBottom:6}}>Grid Size</div>\r\n              <div style={{display:'flex',gap:8,alignItems:'center',marginBottom:8}}>\r\n                <label style={{fontSize:13}}>Rows\r\n                  <input type=\"number\" value={rows} min={1} max={50} onChange={(e)=>setRows(Number(e.target.value))} style={{width:70,marginLeft:8}} />\r\n                </label>\r\n                <label style={{fontSize:13}}>Columns\r\n                  <input type=\"number\" value={cols} min={1} max={100} onChange={(e)=>setCols(Number(e.target.value))} style={{width:80,marginLeft:8}} />\r\n                </label>\r\n              </div>\r\n\r\n              <div style={{fontSize:13,fontWeight:700,marginBottom:6}}>Numbering</div>\r\n              <div style={{marginBottom:8}}>\r\n                <label style={{display:'block'}}><input type=\"radio\" checked={order==='column'} onChange={()=>setOrder('column')} /> <strong>Down columns</strong>  numbers fill top-to-bottom, then left-to-right (default)</label>\r\n                <label style={{display:'block'}}><input type=\"radio\" checked={order==='row'} onChange={()=>setOrder('row')} /> <strong>Across rows</strong>  numbers fill left-to-right, then top-to-bottom</label>\r\n              </div>\r\n\r\n              <div style={{fontSize:13,fontWeight:700,marginBottom:6}}>Mode</div>\r\n              <div style={{marginBottom:8}}>\r\n                <label>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={scrambled}\r\n                    onChange={(e)=>{\r\n                      const isChecked = e.target.checked\r\n                      setScrambled(isChecked)\r\n                      if (isChecked) {\r\n                        setValues(Array.from({length:rows}, ()=> Array.from({length:cols}, ()=> null)))\r\n                      } else {\r\n                        generateSequential()\r\n                      }\r\n                    }}\r\n                  /> <strong>Scrambled grid</strong>  you will fill numbers manually\r\n                </label>\r\n              </div>\r\n\r\n              {!scrambled && (\r\n                <div style={{marginBottom:8}}>\r\n                  <label style={{display:'block'}}>First number (default start)\r\n                    <input type=\"number\" value={firstNum} onChange={(e)=>setFirstNum(Number(e.target.value))} style={{width:100,marginLeft:8}} />\r\n                  </label>\r\n                </div>\r\n              )}\r\n\r\n              {scrambled && (\r\n                <div style={{marginTop:8,maxHeight:240,overflow:'auto',border:'1px solid #eee',padding:8}}>\r\n                  <div style={{fontSize:13,fontWeight:600,marginBottom:6}}>Fill numbers manually</div>\r\n                  <div style={{fontSize:12,color:'#333',marginBottom:8}}>Click each cell in the preview to enter a number, or type into the fields below.</div>\r\n                  {Array.from({length:rows}).map((_,r)=> (\r\n                    <div key={r} style={{display:'flex',gap:6,marginBottom:6}}>\r\n                      {Array.from({length:cols}).map((_,c)=> (\r\n                        <input key={c} value={values?.[r]?.[c] ?? ''} onChange={(e)=>updateCell(r,c,e.target.value)} style={{width:48,textAlign:'center'}} />\r\n                      ))}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              <div style={{marginTop:12,display:'flex',gap:8,alignItems:'center'}}>\r\n                <button onClick={generateSequential} style={{marginRight:8}}>Preview Fill</button>\r\n                <button onClick={()=>{ setRows(20); setCols(5); setOrder('column'); setScrambled(false); generateSequential(); }}>Reset Defaults</button>\r\n                <div style={{marginLeft:8,color: cellTooSmall ? '#b00' : '#666', fontSize:12}}>\r\n                  {cellTooSmall ? 'Bounding box too small for selected grid  enlarge box' : `Cell size: ${Math.max(0,Math.floor(cellWidth))}${Math.max(0,Math.floor(cellHeight))} px`}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Player overlay controls */}\r\n              <div style={{marginTop:12}}> \r\n                <div style={{fontSize:13,fontWeight:700,marginBottom:6}}>Player Overlay</div>\r\n                <div style={{marginBottom:8,display:'flex',gap:12,alignItems:'flex-start',justifyContent:'space-between'}}>\r\n                <div style={{flex:'1 1 auto'}}>\r\n                  <label style={{display:'block'}}>\r\n                    <input type=\"radio\" name=\"overlayType\" checked={overlayType==='dab'} onChange={()=>setOverlayType('dab')} /> <strong>Dab overlay</strong>\r\n                  </label>\r\n                  <label style={{display:'block'}}>\r\n                    <input type=\"radio\" name=\"overlayType\" checked={overlayType==='player'} onChange={()=>setOverlayType('player')} /> <strong>Player overlay</strong>\r\n                  </label>\r\n                  <label style={{display:'block'}}>\r\n                    <input type=\"radio\" name=\"overlayType\" checked={overlayType==='both'} onChange={()=>setOverlayType('both')} /> <strong>Both</strong>\r\n                  </label>\r\n                </div>\r\n\r\n                {/* quick toggles to show/hide row/column player labels (moved to the right) */}\r\n                {(overlayType === 'player' || overlayType === 'both') && (\r\n                  <div style={{minWidth:140,display:'flex',flexDirection:'column',gap:8}}>\r\n                    <label style={{fontSize:12}}><input type=\"checkbox\" checked={showPlayerRows} onChange={(e)=>setShowPlayerRows(e.target.checked)} /> Show players in rows</label>\r\n                    <label style={{fontSize:12}}><input type=\"checkbox\" checked={showPlayerCols} onChange={(e)=>setShowPlayerCols(e.target.checked)} /> Show players in columns</label>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n                {/* only show player name editors when player overlay is enabled */}\r\n                {(overlayType === 'player' || overlayType === 'both') && (\r\n                  <div style={{marginTop:8,maxHeight:220,overflow:'auto',border:'1px solid #eee',padding:8}}>\r\n                    <div style={{fontSize:12,fontWeight:600,marginBottom:6}}>Player names for rows</div>\r\n                    {playerRows.map((name, i) => (\r\n                      <input key={i} value={name} onChange={(e)=>{\r\n                        const val = e.target.value\r\n                        // update local preview\r\n                        setPlayerRows(prev=>{ const next = prev.slice(); next[i] = val; return next })\r\n                        // update global players immediately so other UIs stay in sync\r\n                        if (setPlayersRows) setPlayersRows(prev => { const next = (prev || []).slice(); next[i] = val; return next })\r\n                      }} style={{width:'100%',marginBottom:6}} />\r\n                    ))}\r\n\r\n                    <div style={{fontSize:12,fontWeight:600,marginTop:8,marginBottom:6}}>Player names for columns</div>\r\n                    {playerCols.map((name, i) => (\r\n                      <input key={i} value={name} onChange={(e)=>{\r\n                        const val = e.target.value\r\n                        setPlayerCols(prev=>{ const next = prev.slice(); next[i] = val; return next })\r\n                        if (setPlayersCols) setPlayersCols(prev => { const next = (prev || []).slice(); next[i] = val; return next })\r\n                      }} style={{width:'100%',marginBottom:6}} />\r\n                    ))}\r\n\r\n                    <div style={{display:'flex',gap:8,marginTop:6}}>\r\n                      <button onClick={()=>{ const rdef = Array.from({length:rows}, (_,i)=>`Player ${i+1}`); const cdef = Array.from({length:cols}, (_,i)=>`Player ${i+1}`); setPlayerRows(rdef); setPlayerCols(cdef); if (setPlayersRows) setPlayersRows(rdef); if (setPlayersCols) setPlayersCols(cdef); }}>Populate defaults</button>\r\n                      <button onClick={()=>{ const rempR = Array.from({length:rows}, ()=>''); const rempC = Array.from({length:cols}, ()=>''); setPlayerRows(rempR); setPlayerCols(rempC); if (setPlayersRows) setPlayersRows(rempR); if (setPlayersCols) setPlayersCols(rempC); }}>Clear</button>\r\n                    </div>\r\n\r\n                    <div style={{marginTop:8,display:'flex',gap:8,alignItems:'center'}}>\r\n                      <label style={{fontSize:12}}>Row label offset (px)\r\n                        <input type=\"number\" value={rowOffset} onChange={(e)=>setRowOffset(Number(e.target.value))} style={{width:80,marginLeft:8}} />\r\n                      </label>\r\n                      <label style={{fontSize:12}}>Column label offset (px)\r\n                        <input type=\"number\" value={colOffset} onChange={(e)=>setColOffset(Number(e.target.value))} style={{width:80,marginLeft:8}} />\r\n                      </label>\r\n                      <div style={{fontSize:12,color:'#666'}}>Tip: drag labels in the preview to adjust offsets interactively</div>\r\n                    </div>\r\n\r\n\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}