{"ast":null,"code":"/*\r\n  src/utils/idb.js\r\n  Minimal IndexedDB helper for storing image files by key.\r\n*/\n\nexport function openDB() {\n  return new Promise((resolve, reject) => {\n    const req = indexedDB.open('bingo-images', 1);\n    req.onupgradeneeded = () => {\n      req.result.createObjectStore('images');\n    };\n    req.onsuccess = () => resolve(req.result);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function putFile(key, file) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('images', 'readwrite');\n    tx.objectStore('images').put(file, key);\n    tx.oncomplete = () => resolve();\n    tx.onerror = () => reject(tx.error);\n  });\n}\nexport async function getFile(key) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('images', 'readonly');\n    const req = tx.objectStore('images').get(key);\n    req.onsuccess = () => resolve(req.result || null);\n    req.onerror = () => reject(req.error);\n  });\n}\nexport async function deleteFile(key) {\n  const db = await openDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction('images', 'readwrite');\n    tx.objectStore('images').delete(key);\n    tx.oncomplete = () => resolve();\n    tx.onerror = () => reject(tx.error);\n  });\n}","map":{"version":3,"names":["openDB","Promise","resolve","reject","req","indexedDB","open","onupgradeneeded","result","createObjectStore","onsuccess","onerror","error","putFile","key","file","db","tx","transaction","objectStore","put","oncomplete","getFile","get","deleteFile","delete"],"sources":["C:/Users/Rande/bingocaller/src/utils/idb.js"],"sourcesContent":["/*\r\n  src/utils/idb.js\r\n  Minimal IndexedDB helper for storing image files by key.\r\n*/\r\n\r\nexport function openDB() {\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.open('bingo-images', 1)\r\n    req.onupgradeneeded = () => {\r\n      req.result.createObjectStore('images')\r\n    }\r\n    req.onsuccess = () => resolve(req.result)\r\n    req.onerror = () => reject(req.error)\r\n  })\r\n}\r\n\r\nexport async function putFile(key, file) {\r\n  const db = await openDB()\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('images', 'readwrite')\r\n    tx.objectStore('images').put(file, key)\r\n    tx.oncomplete = () => resolve()\r\n    tx.onerror = () => reject(tx.error)\r\n  })\r\n}\r\n\r\nexport async function getFile(key) {\r\n  const db = await openDB()\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('images', 'readonly')\r\n    const req = tx.objectStore('images').get(key)\r\n    req.onsuccess = () => resolve(req.result || null)\r\n    req.onerror = () => reject(req.error)\r\n  })\r\n}\r\n\r\nexport async function deleteFile(key) {\r\n  const db = await openDB()\r\n  return new Promise((resolve, reject) => {\r\n    const tx = db.transaction('images', 'readwrite')\r\n    tx.objectStore('images').delete(key)\r\n    tx.oncomplete = () => resolve()\r\n    tx.onerror = () => reject(tx.error)\r\n  })\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,OAAO,SAASA,MAAMA,CAAA,EAAG;EACvB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMC,GAAG,GAAGC,SAAS,CAACC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;IAC7CF,GAAG,CAACG,eAAe,GAAG,MAAM;MAC1BH,GAAG,CAACI,MAAM,CAACC,iBAAiB,CAAC,QAAQ,CAAC;IACxC,CAAC;IACDL,GAAG,CAACM,SAAS,GAAG,MAAMR,OAAO,CAACE,GAAG,CAACI,MAAM,CAAC;IACzCJ,GAAG,CAACO,OAAO,GAAG,MAAMR,MAAM,CAACC,GAAG,CAACQ,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeC,OAAOA,CAACC,GAAG,EAAEC,IAAI,EAAE;EACvC,MAAMC,EAAE,GAAG,MAAMhB,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMc,EAAE,GAAGD,EAAE,CAACE,WAAW,CAAC,QAAQ,EAAE,WAAW,CAAC;IAChDD,EAAE,CAACE,WAAW,CAAC,QAAQ,CAAC,CAACC,GAAG,CAACL,IAAI,EAAED,GAAG,CAAC;IACvCG,EAAE,CAACI,UAAU,GAAG,MAAMnB,OAAO,CAAC,CAAC;IAC/Be,EAAE,CAACN,OAAO,GAAG,MAAMR,MAAM,CAACc,EAAE,CAACL,KAAK,CAAC;EACrC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeU,OAAOA,CAACR,GAAG,EAAE;EACjC,MAAME,EAAE,GAAG,MAAMhB,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMc,EAAE,GAAGD,EAAE,CAACE,WAAW,CAAC,QAAQ,EAAE,UAAU,CAAC;IAC/C,MAAMd,GAAG,GAAGa,EAAE,CAACE,WAAW,CAAC,QAAQ,CAAC,CAACI,GAAG,CAACT,GAAG,CAAC;IAC7CV,GAAG,CAACM,SAAS,GAAG,MAAMR,OAAO,CAACE,GAAG,CAACI,MAAM,IAAI,IAAI,CAAC;IACjDJ,GAAG,CAACO,OAAO,GAAG,MAAMR,MAAM,CAACC,GAAG,CAACQ,KAAK,CAAC;EACvC,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeY,UAAUA,CAACV,GAAG,EAAE;EACpC,MAAME,EAAE,GAAG,MAAMhB,MAAM,CAAC,CAAC;EACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACtC,MAAMc,EAAE,GAAGD,EAAE,CAACE,WAAW,CAAC,QAAQ,EAAE,WAAW,CAAC;IAChDD,EAAE,CAACE,WAAW,CAAC,QAAQ,CAAC,CAACM,MAAM,CAACX,GAAG,CAAC;IACpCG,EAAE,CAACI,UAAU,GAAG,MAAMnB,OAAO,CAAC,CAAC;IAC/Be,EAAE,CAACN,OAAO,GAAG,MAAMR,MAAM,CAACc,EAAE,CAACL,KAAK,CAAC;EACrC,CAAC,CAAC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}